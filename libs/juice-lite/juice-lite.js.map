{"version":3,"file":"juice-lite.js","sourceRoot":"","sources":["../src/Builder.ts","../src/BindableObject.ts","../src/UIElement.ts","../src/UIElementBehaviour.ts","../src/HeaderedControl.ts","../src/Control.ts","../src/ContentControl.ts","../src/HeaderedContentControl.ts","../src/Accordion.ts","../src/Template.ts","../src/Application.ts","../src/Button.ts","../src/Collection.ts","../src/Dialogs.ts","../src/Events.ts","../src/ItemsControl.ts","../src/Grid.ts","../src/HeaderedItemsControl.ts","../src/HtmlContainer.ts","../src/Juice.ts","../src/Page.ts","../src/Selector.ts","../src/StackLayout.ts","../src/TableView.ts","../src/Toolbar.ts","../src/internals/core-utils.ts","../src/internals/template-utils.ts","../src/internals/uielement-utils.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nnamespace Juice {\r\n\r\n    export interface ClassInfoBase {\r\n        baseClass: any; // TODO\r\n        className: string;\r\n        isAbstract?: boolean;\r\n    }\r\n\r\n    export interface ComponentInfoBase extends ClassInfoBase {\r\n        tagName?: string;\r\n    }\r\n\r\n    export interface ClassInfo<T> extends ClassInfoBase {\r\n        classConstructor: new (...args: any[]) => T;\r\n    }\r\n\r\n    export interface ComponentInfo<T> extends ComponentInfoBase {\r\n        classConstructor: new (...args: any[]) => T;\r\n    }\r\n\r\n    export interface ComponentsFilterOptions {\r\n        baseClass?: any;\r\n        className?: RegExp;\r\n        tagName?: RegExp;\r\n        classConstructor?: (...args: any[]) => any;\r\n        extendClass?: any;\r\n    }\r\n\r\n    export class Builder {\r\n\r\n        // private static _classes: { [name: string]: ClassInfoBase } = {};\r\n        // private static _components: { [name: string]: ComponentInfoBase } = {};\r\n        private static _classes = new Map<string, ClassInfoBase>();\r\n        private static _components = new Map<string, ComponentInfoBase>();\r\n\r\n        private static registerClass(info: ClassInfoBase) {\r\n            if (this._classes.has(info.className)) {\r\n                console.log(info.className + \" already defined\");\r\n                return;\r\n            }\r\n            this._classes.set(info.className, info);\r\n        }\r\n\r\n        private static registerComponent(info: ComponentInfoBase) {\r\n\r\n            if (this._components.has(info.className)) {\r\n                console.log(info.className + \" already defined\");\r\n                return;\r\n            }\r\n            this._components.set(info.className, info);\r\n\r\n\r\n            // var lowerTagName = info.tagName.toLowerCase();\r\n            // if (this._components.has(lowerTagName)) {\r\n            //     console.log(info.tagName + \" already defined\");\r\n            //     return;\r\n            // }\r\n            // this._components.set(lowerTagName, info);\r\n\r\n            //window.customElements.define(info.tagName, (info as any).classConstructor);\r\n        }\r\n\r\n        private static classExtendsOrIsClass(componentInfo: ComponentInfoBase, testClass: any) {\r\n            if((componentInfo as any).classConstructor === testClass){\r\n                return true;\r\n            }\r\n            return (componentInfo as any).classConstructor.prototype instanceof testClass;\r\n        }\r\n\r\n        public static defineComponent<T>(info: ComponentInfo<T>) {\r\n            this.registerComponent(info);\r\n            Object.defineProperty(info.classConstructor, \"baseClass\", { value: info.baseClass });\r\n            Object.defineProperty(info.classConstructor, \"className\", { value: info.className });\r\n            if(info.tagName) {\r\n                Object.defineProperty(info.classConstructor, \"tagName\", { value: info.tagName });\r\n            }\r\n        }\r\n\r\n        public static defineClass<T>(info: ClassInfo<T>) {\r\n            this.registerClass(info);\r\n            Object.defineProperty(info.classConstructor, \"className\", { value: info.className });\r\n            Object.defineProperty(info.classConstructor, \"baseClass\", { value: info.baseClass });\r\n        }\r\n\r\n        public static applyBehaviours(type: any, behaviourTypes: any[]) {\r\n            behaviourTypes.forEach(baseCtor => {\r\n                Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\r\n                    Object.defineProperty(type.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\r\n                });\r\n            });\r\n        }\r\n\r\n        public static getComponents(filterOptions? : ComponentsFilterOptions): Iterable<ComponentInfoBase> {\r\n            if (!filterOptions) {\r\n                return this._components.values();\r\n            }\r\n            else {\r\n                let filterHandler = (v: ComponentInfoBase) => {\r\n                    if (filterOptions.extendClass && !this.classExtendsOrIsClass(v, filterOptions.extendClass)){\r\n                        return false;\r\n                    }\r\n                    if (filterOptions.baseClass && filterOptions.baseClass !== v.baseClass){\r\n                        return false;\r\n                    }\r\n                    if (filterOptions.className && !filterOptions.className.test(v.className)){\r\n                        return false;\r\n                    }\r\n                    if (filterOptions.tagName && !filterOptions.tagName.test(v.tagName)){\r\n                        return false;\r\n                    }\r\n                    if (filterOptions.classConstructor) {\r\n                        if(\"classConstructor\" in (v as any)) {\r\n                            let component = v as any;\r\n                            if (filterOptions.classConstructor !== component.classConstructor){\r\n                                return false;\r\n                            }\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    }\r\n                    return true;\r\n                };\r\n                return Array.from(this._components.values()).filter(filterHandler);\r\n            }\r\n        }\r\n    }\r\n}","\r\nnamespace Juice {\r\n\r\n    export interface PropertyChangedEventArgs extends EventArgs {\r\n        propertyName: string;\r\n        propertyValue: any;\r\n    }\r\n\r\n    export class BindableObject {\r\n\r\n        protected readonly events: EventsManager;\r\n\r\n        //private _bindings: Map<string, any>;\r\n\r\n        constructor() {\r\n            //this._bindings = new Map<string, any>();\r\n            this.events = new EventsManager(this);\r\n            this.onPropertyChanged = new EventSet<BindableObject, PropertyChangedEventArgs>(this.events, \"onPropertyChanged\", this);\r\n        }\r\n\r\n        public readonly onPropertyChanged: EventSet<BindableObject, PropertyChangedEventArgs>;\r\n\r\n        // public setBinding(propertyName: string, bindingObject: any): void {\r\n        //     BindingUtils.attachBinding(this, propertyName, bindingObject);\r\n        //     this._bindings[propertyName] = bindingObject;\r\n        // }\r\n\r\n        // public removeBinding(propertyName: string): boolean {\r\n        //     if (propertyName in this._bindings) {\r\n\r\n        //         BindingUtils.detachBinding(this, propertyName, this._bindings[propertyName]);\r\n        //         delete this._bindings[propertyName];\r\n        //         return true;\r\n        //     }\r\n        //     return false;\r\n        // }\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: BindableObject,\r\n        className: \"Juice.BindableObject\"\r\n    });\r\n}","/// <reference path=\"Builder.ts\" />\r\n/// <reference path=\"BindableObject.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    export class UIElement extends BindableObject {\r\n\r\n        private _template: TemplateSource;\r\n        private _templatedElement: TemplatedElement;\r\n        private _htmlElement: Element;\r\n        private _data: any;\r\n        private _applyTemplateListeners: Array<(templatedElement: TemplatedElement) => void> = [];\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super();\r\n\r\n            this._htmlElement = document.createElement(\"div\");\r\n            this.uid = Internals.getFreeUid();\r\n            this.resources = new Map<string, any>();\r\n            this.init(template);\r\n        }\r\n\r\n        private init(template?: TemplateSource) {\r\n            if (template) {\r\n                this._template = TemplateManager.createTemplate(template);\r\n                this._templatedElement = this._template.importTemplate();\r\n                this.initializeTemplate(this._templatedElement);\r\n            }\r\n            else {\r\n                TemplateManager\r\n                    .getTemplate((<any>this).constructor.className)\r\n                    .then(result => {\r\n                        this.template = result;\r\n                    })\r\n                    .catch(err => { });\r\n            }\r\n        }\r\n\r\n        protected readonly resources: Map<string, any>;\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n\r\n            let templateHtmlElement = templatedElement.rootElement;\r\n            templateHtmlElement.setAttribute(\"uid\", this.uid.toString());\r\n\r\n            if (this._htmlElement) {\r\n                if (this._htmlElement.parentElement) {\r\n                    this._htmlElement.parentElement.insertBefore(templateHtmlElement, this._htmlElement);\r\n                    this._htmlElement.parentElement.removeChild(this._htmlElement);\r\n                }\r\n            }\r\n\r\n            if (this._htmlElement.parentElement) {\r\n                this._htmlElement.parentElement.insertBefore(templateHtmlElement, this._htmlElement);\r\n                this._htmlElement.remove();\r\n            }\r\n            this._htmlElement = templateHtmlElement;\r\n\r\n            Internals.registerElement(this.uid, this, this._htmlElement);\r\n        }\r\n\r\n\r\n        // protected virtual\r\n        protected _onApplyTemplate(templatedElement: TemplatedElement) { }\r\n\r\n        protected registerApplyTemplateListener(handler: (templatedElement: TemplatedElement) => void) {\r\n            handler = handler.bind(this);\r\n            this._applyTemplateListeners.push(handler);\r\n        }\r\n\r\n\r\n        public get data(): any {\r\n            return this._data;\r\n        }\r\n        public set data(v: any) {\r\n            this._data = v;\r\n            this.onPropertyChanged.trigger({ propertyName: \"data\", propertyValue: v });\r\n        }\r\n\r\n        public readonly uid: string;\r\n\r\n        public get template(): TemplateSource {\r\n            return this._template;\r\n        }\r\n        public set template(v: TemplateSource) {\r\n            this.init(v);\r\n            this._onApplyTemplate(this._templatedElement);\r\n            for (let handler of this._applyTemplateListeners)\r\n                handler(this._templatedElement);\r\n            this.onPropertyChanged.trigger({ propertyName: \"template\", propertyValue: v });\r\n        }\r\n\r\n        public get htmlElement(): Element {\r\n            return this._htmlElement;\r\n        }\r\n\r\n\r\n        public appendToHtmlElement(parentElement: HTMLElement | string) {\r\n\r\n            if (parentElement == null) {\r\n                parentElement = document.body;\r\n            }\r\n            else if (typeof parentElement === \"string\") {\r\n                parentElement = <HTMLElement>document.querySelector(parentElement);\r\n            }\r\n\r\n            if (parentElement instanceof HTMLElement) {\r\n                parentElement.appendChild(this._htmlElement);\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        public getApplicationId() {\r\n            if (this._htmlElement.parentElement) {\r\n                let element = this._htmlElement;\r\n                while (element != null) {\r\n                    if (element.hasAttribute(\"app-id\")) {\r\n                        return element.getAttribute(\"app-id\");\r\n                    }\r\n                    element = element.parentElement;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        public getApplication() {\r\n            let appId = this.getApplicationId();\r\n            if (appId) {\r\n                return Juice.getApplication(appId);\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: BindableObject,\r\n        className: \"Juice.UIElement\",\r\n        classConstructor: UIElement\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    export class UIElementBehaviour extends BindableObject {\r\n\r\n        public static applyTo(type: any, behaviourTypes: any[]) {\r\n            behaviourTypes.forEach(baseCtor => {\r\n                Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\r\n                    Object.defineProperty(type.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\r\n                });\r\n            });\r\n        }\r\n\r\n        protected static initialize<T extends UIElementBehaviour>(behaviourType: new () => T, instance: UIElement): void {\r\n            var initializeName = \"initialize\" + behaviourType.name;\r\n            var initializeMethod = (<any>instance)[initializeName];\r\n            if (typeof initializeMethod === \"function\") {\r\n                initializeMethod.bind(instance)();\r\n            } else {\r\n                console.warn(\"missing initialize method: \" + initializeName);\r\n            }\r\n        }\r\n    }\r\n}","/// <reference path=\"UIElement.ts\" />\r\n/// <reference path=\"UIElementBehaviour.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    export class HeaderedControlBehaviour extends UIElementBehaviour {\r\n\r\n        private _headerValue: Content = null;\r\n        private _headerElement: HTMLElement = null;\r\n        private _headerElementSelector: Selector = null;\r\n\r\n        //protected constructor() {\r\n        //    super();\r\n        //}\r\n\r\n        private initializeHeaderedControlBehaviour(): void {\r\n            (<any>this).registerApplyTemplateListener(() => {\r\n                this.onHeaderPropertyChanged();\r\n            });\r\n        }\r\n\r\n        private onHeaderPropertyChanged() {\r\n            var headerElement = this.getHeaderElement();\r\n            if (headerElement)\r\n                Internals.setContent(headerElement, this._headerValue);\r\n            this._onHeaderChanged(headerElement, this._headerValue);\r\n        }\r\n\r\n        private getHeaderElement() {\r\n            if (this._headerElementSelector) {\r\n                this._headerElement = this._headerElementSelector.query() as HTMLElement;\r\n            }\r\n            //if (!this._headerElement) {\r\n            //    if (this.template) {\r\n            //        this._headerElement = this.template.htmlElement.querySelector(\"*[template-part='header']\");\r\n            //    }\r\n            //}\r\n            return this._headerElement;\r\n        }\r\n\r\n        // protected virtual\r\n        protected _onHeaderChanged(headerElement: HTMLElement, content: Content): void { }\r\n\r\n        protected _setHeaderElement(headerElement: Selector | HTMLElement): void {\r\n            if (headerElement instanceof HTMLElement) {\r\n                this._headerElement = headerElement;\r\n                this._headerElementSelector = null;\r\n            } else {\r\n                this._headerElementSelector = headerElement;\r\n            }\r\n        }\r\n\r\n        public get header(): Content {\r\n            return this._headerValue;\r\n        }\r\n        public set header(v: Content) {\r\n            if (this._headerValue != v) {\r\n                this._headerValue = v;\r\n                this.onHeaderPropertyChanged();\r\n                this.events.trigger(\"onPropertyChanged\", { propertyName: \"header\", propertyValue: v });\r\n            }\r\n        }\r\n    }\r\n\r\n    export class HeaderedControl extends UIElement {\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            UIElementBehaviour.initialize(HeaderedControlBehaviour, this);\r\n            this._setHeaderElement(templatedElement.getPart<HTMLElement>(\"header\").element);\r\n        }\r\n\r\n        protected _onApplyTemplate(templatedElement: TemplatedElement) {\r\n            super._onApplyTemplate(templatedElement);\r\n            this.initializeTemplate(templatedElement);\r\n        }\r\n    }\r\n\r\n    export interface HeaderedControl extends HeaderedControlBehaviour {\r\n        new(template?: string | HTMLTemplateElement | HTMLElement): HeaderedControl;\r\n    }\r\n\r\n    Builder.applyBehaviours(HeaderedControl, [HeaderedControlBehaviour]);\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: HeaderedControl,\r\n        className: \"Juice.HeaderedControl\",\r\n        tagName: \"jui-headered-control\"\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    export class Control extends UIElement {\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n        }\r\n\r\n        public get isEnabled() {\r\n            return !this.htmlElement.hasAttribute(\"disabled\");\r\n        }\r\n        public set isEnabled(v: boolean) {\r\n            if (!!v) {\r\n                this.htmlElement.removeAttribute(\"disabled\");\r\n            } else {\r\n                this.htmlElement.setAttribute(\"disabled\", \"disabled\");\r\n            }\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: Control,\r\n        className: \"Juice.Control\",\r\n        tagName: \"jui-control\"\r\n    });\r\n}","/// <reference path=\"uielement.ts\" />\r\n/// <reference path=\"uielementbehaviour.ts\" />\r\n/// <reference path=\"Control.ts\" />\r\n\r\n\r\nnamespace Juice {\r\n\r\n    export type ValueContent = undefined | string | number | boolean | object;\r\n    export type VisualContent = HTMLElement | UIElement | NodeList;\r\n    export type ContentArray = Array<ValueContent> | Array<VisualContent>\r\n    export type Content = string | number | boolean | object | HTMLElement | UIElement | ContentArray;\r\n\r\n    export class ContentControlBehaviour extends UIElementBehaviour {\r\n\r\n        private _contentValue: Content = null;\r\n        private _contentElement: HTMLElement = null;\r\n        private _contentElementSelector: Selector = null;\r\n\r\n        //protected constructor() {\r\n        //    super();\r\n        //}\r\n\r\n        private initializeContentControlBehaviour(): void {\r\n            (<any>this).registerApplyTemplateListener(() => {\r\n                this.onContentPropertyChanged();\r\n            });\r\n        }\r\n\r\n        private onContentPropertyChanged() {\r\n            var contentElement = this.getContentElement();\r\n            if (contentElement) {\r\n                Internals.setContent(contentElement, this._contentValue);\r\n            }\r\n            this._onContentChanged(contentElement, this._contentValue);\r\n        }\r\n\r\n        private getContentElement() {\r\n            if (this._contentElementSelector) {\r\n                this._contentElement = this._contentElementSelector.query() as HTMLElement;\r\n            }\r\n            //if (!this._contentElement) {\r\n            //    if (this.template) {\r\n            //        this._contentElement = this.template.htmlElement.querySelector(\"*[template-part='content']\");\r\n            //    }\r\n            //}\r\n            return this._contentElement;\r\n        }\r\n\r\n        // protected virtual\r\n        protected _onContentChanged(contentElement: HTMLElement, content: Content): void { }\r\n\r\n        protected _setContentElement(contentElement: Selector | HTMLElement): void {\r\n            if (contentElement instanceof HTMLElement) {\r\n                this._contentElement = contentElement;\r\n                this._contentElementSelector = null;\r\n            } else {\r\n                this._contentElementSelector = contentElement;\r\n            }\r\n            this.onContentPropertyChanged();\r\n        }\r\n\r\n        public get content(): Content {\r\n            return this._contentValue;\r\n        }\r\n        public set content(v: Content) {\r\n            if (this._contentValue != v) {\r\n                this._contentValue = v;\r\n                this.onContentPropertyChanged();\r\n                this.events.trigger(\"onPropertyChanged\", { propertyName: \"content\", propertyValue: v });\r\n            }\r\n        }\r\n    }\r\n\r\n    export class ContentControl extends Control {\r\n\r\n        private static readonly DefaultContentControlTemplate = `\r\n<template template-class=\"Juice.ContentControl\">\r\n    <div template-part=\"frame\" class=\"content-control-frame\">\r\n        <div template-part=\"content\" class=\"content-control-content\"></div>\r\n    </div>\r\n</template>`;\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template || ContentControl.DefaultContentControlTemplate);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            UIElementBehaviour.initialize(ContentControlBehaviour, this);\r\n            this._setContentElement(templatedElement.getPart<HTMLElement>(\"content\").element);\r\n        }\r\n\r\n        protected _onApplyTemplate(templatedElement: TemplatedElement) {\r\n            super._onApplyTemplate(templatedElement);\r\n            this.initializeTemplate(templatedElement);\r\n        }\r\n    }\r\n\r\n    export interface ContentControl extends ContentControlBehaviour {\r\n        new(template?: string | HTMLTemplateElement | HTMLElement): ContentControl;\r\n    }\r\n\r\n    Builder.applyBehaviours(ContentControl, [ContentControlBehaviour]);\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: ContentControl,\r\n        className: \"Juice.ContentControl\",\r\n        tagName: \"jui-content-control\"\r\n    });\r\n}","/// <reference path=\"UIElement.ts\" />\r\n/// <reference path=\"HeaderedControl.ts\" />\r\n/// <reference path=\"ContentControl.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    export class HeaderedContentControl extends UIElement {\r\n        constructor(template?: TemplateSource) {\r\n            super(template);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            UIElementBehaviour.initialize(HeaderedControlBehaviour, this);\r\n            UIElementBehaviour.initialize(ContentControlBehaviour, this);\r\n            this._setHeaderElement(templatedElement.getPart<HTMLElement>(\"header\").element);\r\n            this._setContentElement(templatedElement.getPart<HTMLElement>(\"content\").element);\r\n        }\r\n    }\r\n\r\n    export interface HeaderedContentControl extends HeaderedControlBehaviour, ContentControlBehaviour {\r\n        new(template?: string | HTMLTemplateElement | HTMLElement): HeaderedContentControl;\r\n    }\r\n\r\n    Builder.applyBehaviours(HeaderedContentControl, [HeaderedControlBehaviour, ContentControlBehaviour]);\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: HeaderedContentControl,\r\n        className: \"Juice.HeaderedContentControl\",\r\n        tagName: \"jui-headered-content-control\"\r\n    });\r\n}","/// <reference path=\"Builder.ts\" />\r\n/// <reference path=\"HeaderedContentControl.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    export interface AccordionStateChangedArgs {\r\n        isExpanded: boolean;\r\n        isFirstExpansion: boolean;\r\n    }\r\n\r\n    export class Accordion extends HeaderedContentControl {\r\n\r\n        protected static readonly DefaultAccordionStyles = `\r\n    .jui-accordion {\r\n    \r\n    }\r\n    \r\n    .jui-accordion-header {\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        /*border-top-left-radius: 3px;\r\n        border-top-right-radius: 3px;\r\n        border: 1px solid #ccc;\r\n        background: #eee;\r\n        padding-top: 4px;\r\n        padding-left: 6px;\r\n        padding-right: 3ch;\r\n        padding-bottom: 5px;*/\r\n        position: relative;\r\n        user-select: none;\r\n        cursor: pointer;\r\n    }\r\n    \r\n    .jui-accordion-symbol {\r\n        position: absolute;\r\n        right: 1ch;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        /*color: #777;*/\r\n    }\r\n\r\n    .jui-accordion-symbol > .expanded {\r\n        display: none;\r\n    }\r\n\r\n    .jui-accordion-symbol > .collapsed {\r\n        display: inline;\r\n    }\r\n    \r\n    .jui-accordion-symbol.expanded > .expanded {\r\n        display: inline;\r\n    }\r\n    \r\n    .jui-accordion-symbol.expanded > .collapsed {\r\n        display: none;\r\n    }\r\n    \r\n    .jui-accordion-container {\r\n        display: none;\r\n        /*padding: 6px;\r\n        border-top: 0;\r\n        border-left: 1px solid #ccc;\r\n        border-right: 1px solid #ccc;\r\n        border-bottom: 1px solid #ccc;*/\r\n        content: ' ';\r\n    }`;\r\n\r\n        protected static readonly DefaultAccordionHtmlTemplate = `\r\n    <template template-class=\"Juice.Accordion\">\r\n        <div class=\"jui-accordion\">\r\n            <div template-part=\"accordionHeader\" class=\"jui-accordion-header\">\r\n                <div template-part=\"accordionHead\" class=\"jui-accordion-head\"><span template-part=\"header\"></span></div>\r\n                <div template-part=\"accordionSymbol\" class=\"jui-accordion-symbol\"><i class=\"fa fa-chevron-down collapsed\"></i><i class=\"fa fa-chevron-up expanded\"></i></div>\r\n            </div>\r\n            <div template-part=\"accordionContainer\" class=\"jui-accordion-container\">\r\n                <div>text from template</div>\r\n                <div template-part=\"content\"></div>\r\n            </div>\r\n        </div>\r\n    </template>`;\r\n\r\n        private static readonly DefaultAccordionTemplate = `<style>\\n${Accordion.DefaultAccordionStyles}\\n</style>\\n${Accordion.DefaultAccordionHtmlTemplate}`;\r\n\r\n        private _isExpanded = false;\r\n        private _neverExpanded = true;\r\n\r\n        private _part_accordionHeader: HTMLElement;\r\n        private _part_accordionHead: HTMLElement;\r\n        private _part_accordionSymbol: HTMLElement;\r\n        private _part_accordionContainer: HTMLElement;\r\n\r\n        constructor(template?: string | HTMLTemplateElement | HTMLElement) {\r\n            super(template || Accordion.DefaultAccordionTemplate);\r\n            this.onStateChanged = new EventSet<Accordion, AccordionStateChangedArgs>(this.events, \"onStateChanged\", this);\r\n            //this.registerApplyTemplateListener(this.initialize);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n\r\n            // get template parts\r\n            this._part_accordionHeader = templatedElement.withPartElement<HTMLElement>(\"accordionHeader\", (element) => {\r\n                element.addEventListener(\"click\", this.onHeaderClick.bind(this));\r\n            });\r\n            this._part_accordionHead = templatedElement.getPart<HTMLElement>(\"accordionHead\").element;\r\n            this._part_accordionSymbol = templatedElement.getPart<HTMLElement>(\"accordionSymbol\").element;\r\n            this._part_accordionContainer = templatedElement.getPart<HTMLElement>(\"accordionContainer\").element;\r\n\r\n\r\n            this.header = \"Accordion\";\r\n\r\n            // TODO aggiornare le proprietà di HeaderedControlBehaviour e ContentControlBehaviour\r\n            this.onIsExpandedChanged();\r\n        }\r\n\r\n        private onHeaderClick(e: Event) {\r\n            this.isExpanded = !this._isExpanded;\r\n        }\r\n\r\n        private onIsExpandedChanged() {\r\n            var firstExpansion = false;\r\n            if (this._isExpanded) {\r\n                if (this._neverExpanded)\r\n                    firstExpansion = true;\r\n                this._neverExpanded = false;\r\n                this._part_accordionContainer.style.display = \"block\";\r\n                this._part_accordionSymbol.classList.add(\"expanded\");\r\n            } else {\r\n                this._part_accordionContainer.style.display = \"none\";\r\n                this._part_accordionSymbol.classList.remove(\"expanded\");\r\n            }\r\n            this.events.trigger(\"onPropertyChanged\", { propertyName: \"isExpanded\", propertyValue: this._isExpanded });\r\n            this.events.trigger(\"onStateChanged\", { isExpanded: this._isExpanded, isFirstExpansion: firstExpansion });\r\n        }\r\n\r\n\r\n        //// protected override\r\n        //protected _onApplyTemplate() {\r\n        //    this.initAccordionTemplate();\r\n        //}\r\n\r\n\r\n        public onStateChanged: EventSet<Accordion, AccordionStateChangedArgs>;\r\n\r\n        public get isExpanded(): boolean {\r\n            return this._isExpanded;\r\n        }\r\n        public set isExpanded(v: boolean) {\r\n            if (this._isExpanded != v) {\r\n                this._isExpanded = v;\r\n                this.onIsExpandedChanged();\r\n                this.events.trigger(\"onPropertyChanged\", { propertyName: \"isExpanded\", propertyValue: v });\r\n            }\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: HeaderedContentControl,\r\n        classConstructor: Accordion,\r\n        className: \"Juice.Accordion\",\r\n        tagName: \"jui-accordion\"\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    export type TemplateSource = Template | string | HTMLElement;\r\n\r\n\r\n    export class Template {\r\n\r\n        private static loadTemplateDocument(templateDocument: Document): Template {\r\n            let styleNode = templateDocument.querySelector(\"style\");\r\n            let templateNode = templateDocument.querySelector(\"template\");\r\n            let scriptNode = templateDocument.querySelector(\"script\");\r\n\r\n            let className = \"\";\r\n            if (templateNode.hasAttribute(\"template-class\")) {\r\n                className = templateNode.getAttribute(\"template-class\");\r\n            }\r\n            return new Template(className, templateNode, styleNode, scriptNode);\r\n        }\r\n\r\n        public static from(html: string | Document): Template {\r\n            let doc: Document;\r\n            if (typeof html === \"string\") {\r\n                var parser = new DOMParser();\r\n                doc = parser.parseFromString(html, 'text/html');\r\n            } else {\r\n                doc = html;\r\n            }\r\n            return Template.loadTemplateDocument(doc);\r\n        }\r\n\r\n\r\n        private _element: HTMLTemplateElement;\r\n        private _styles: HTMLStyleElement;\r\n        private _script: HTMLScriptElement;\r\n\r\n        constructor(className: string, element: HTMLTemplateElement, styles: HTMLStyleElement, script: HTMLScriptElement) {\r\n            this.templateClass = className;\r\n            this._element = element;\r\n            this._styles = styles;\r\n            this._script = script;\r\n        }\r\n\r\n        public readonly templateClass: string;\r\n\r\n        public importTemplate(): TemplatedElement {\r\n\r\n            if (this._element.content.children.length > 1) {\r\n                let rootElement = document.createElement(\"div\");\r\n                let children = Array.from(this._element.content.childNodes);\r\n                for (let element of children) {\r\n                    rootElement.appendChild(element);\r\n                }\r\n                this._element.content.append(rootElement);\r\n            }\r\n\r\n            if (this._element.content.children.length == 0) {\r\n                throw new Error(\"missing template content\");\r\n            }\r\n\r\n            let importedElement = document.importNode(this._element.content, true);\r\n\r\n            return new TemplatedElement(this, importedElement);\r\n        }\r\n\r\n        public importStyles(): HTMLStyleElement {\r\n\r\n            if (this._styles) {\r\n                return document.importNode(this._styles, true);\r\n            }\r\n\r\n            // TODO\r\n            return null;\r\n        }\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: Template,\r\n        className: \"Juice.Template\"\r\n    });\r\n\r\n    export class TemplatedElement {\r\n\r\n        private _template: Template;\r\n        private _parts: Map<string, Element>;\r\n        private _templateNode: ParentNode;\r\n\r\n        constructor(template: Template, templateNode: ParentNode) {\r\n            this._template = template;\r\n            this._templateNode = templateNode;\r\n            this._parts = new Map<string, Element>();\r\n            this.findParts();\r\n        }\r\n\r\n\r\n        private findParts() {\r\n            let allParts = this._templateNode.querySelectorAll('*[template-part]');\r\n            for (let part of allParts) {\r\n                let partName = part.getAttribute(\"template-part\");\r\n                this._parts.set(partName, part);\r\n            }\r\n        }\r\n\r\n\r\n        public get rootElement(): Element {\r\n            return this._templateNode.children.item(0);\r\n        }\r\n\r\n\r\n        public get templateDefinition() {\r\n            return this._template;\r\n        }\r\n\r\n\r\n        public getPart<T>(name: string, throwIfNotExists?: boolean): TemplatePart<T> {\r\n            if (this._parts.has(name)) {\r\n                let part = this._parts.get(name);\r\n                let element = part as any as T;\r\n                return new TemplatePart<T>(name, element);\r\n            } else {\r\n                if (throwIfNotExists) {\r\n                    throw new Error(`part whit name ${name} not exists`);\r\n                }\r\n                return null;\r\n            }\r\n        }\r\n\r\n        public withPartElement<T>(name: string, action: (element: T) => void, throwIfNotExists?: boolean): T {\r\n            if (this._parts.has(name)) {\r\n                let part = this._parts.get(name);\r\n                let element = part as any as T;\r\n                action(element);\r\n                return element;\r\n            } else {\r\n                if (throwIfNotExists) {\r\n                    throw new Error(`part whit name ${name} not exists`);\r\n                } else {\r\n                    console.warn(`part whit name ${name} not exists`);\r\n                }\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: TemplatedElement,\r\n        className: \"Juice.TemplatedElement\"\r\n    });\r\n\r\n    export class TemplatePart<T> {\r\n\r\n        constructor(name: string, element: T) {\r\n            this.name = name;\r\n            this.element = element;\r\n        }\r\n\r\n        public readonly name: string;\r\n\r\n        public readonly element: T;\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: TemplatePart,\r\n        className: \"Juice.TemplatePart\"\r\n    });\r\n\r\n    export class TemplateManager {\r\n\r\n        private static _templateDefinitions: Template[] = [];\r\n        private static _importedClassesStyles: Set<string> = new Set<string>();\r\n\r\n        public static createTemplate(templateSource: TemplateSource): Template {\r\n\r\n            if (templateSource instanceof Template) {\r\n                return templateSource;\r\n            }\r\n\r\n            let result: Template = null;\r\n\r\n            if (typeof templateSource === \"string\") {\r\n                if (templateSource.charAt(0) === \"@\") {\r\n                    throw new Error(\"not implemented\");\r\n                    // result = TemplateManager.findByName(templateSource.substr(1));\r\n                    // if (!result) {\r\n                    //     throw new Error(\"unresolved template resource '\" + templateSource + \"'\");\r\n                    // }\r\n                } else {\r\n                    // assume si tratti di una stinga contenente codice html\r\n                    result = Template.from(templateSource);\r\n                    if (!result) {\r\n                        throw new Error(\"unresolved template resource, invalid html code\");\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.addTemplate(result);\r\n            return result;\r\n        }\r\n\r\n        public static addTemplate(template: Template) {\r\n            if (!this._importedClassesStyles.has(template.templateClass)) {\r\n                let classStyles = template.importStyles();\r\n                if (classStyles) {\r\n                    document.head.appendChild(classStyles);\r\n                    this._importedClassesStyles.add(template.templateClass);\r\n                }\r\n            }\r\n            this._templateDefinitions.push(template);\r\n        }\r\n\r\n        public static getTemplate(className: string): Promise<Template> {\r\n            let templateDefs = this._templateDefinitions.filter((v, i, a) => v.templateClass === className);\r\n            if (templateDefs.length > 0) {\r\n                return new Promise<Template>(resolve => resolve(templateDefs[0]));\r\n            } else {\r\n                return new Promise<Template>((resolve, reject) => {\r\n                    this\r\n                        .loadExternal(className)\r\n                        .then(result => {\r\n                            this.addTemplate(result)\r\n                            resolve(result);\r\n                        })\r\n                        .catch(err => {\r\n                            reject(err);\r\n                        });\r\n\r\n                });\r\n            }\r\n        }\r\n\r\n        public static loadExternal(className: string): Promise<Template> {\r\n            let templatePath = className.split(\".\").join(\"/\") + \".html\";\r\n            return new Promise<Template>((resolve, reject) => {\r\n                Internals.getTemplateFile(templatePath)\r\n                    .then(result => {\r\n                        let template = Template.from(result);\r\n                        if (template.templateClass !== className) {\r\n                            throw new Error(\"invalid template class name\");\r\n                        }\r\n                        resolve(template);\r\n                    })\r\n                    .catch(err => {\r\n                        reject(err);\r\n                    });\r\n            });\r\n        }\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: TemplateManager,\r\n        className: \"Juice.TemplateManager\"\r\n    });\r\n}","\r\n/// <reference path=\"Template.ts\" />\r\n/// <reference path=\"ContentControl.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    class ApplicationFrame extends ContentControl {\r\n\r\n        protected static readonly DefaultApplicationFrameStyles = `\r\n    .jui-app {\r\n        height: 100%;\r\n    }\r\n\r\n    .jui-app-content {\r\n        height: 100%;\r\n    }`;\r\n\r\n        protected static readonly DefaultApplicationFrameHtmlTemplate = `\r\n    <template template-class=\"Juice.Application\">\r\n        <div class=\"jui-app\" template-part=\"appRoot\">\r\n            <div class=\"jui-app-content\" template-part=\"content\"></div>\r\n        </div>\r\n    </template>`;\r\n\r\n        private static readonly DefaultApplicationFrameTemplate = `<style>\\n${ApplicationFrame.DefaultApplicationFrameStyles}\\n</style>\\n${ApplicationFrame.DefaultApplicationFrameHtmlTemplate}`;\r\n\r\n        private _applicationService: ApplicationService;\r\n        private _part_appRoot: HTMLElement;\r\n\r\n        constructor(applicationService: ApplicationService, template?: TemplateSource) {\r\n            super(template || ApplicationFrame.DefaultApplicationFrameTemplate);\r\n            this._applicationService = applicationService;\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            this._part_appRoot = templatedElement.getPart<HTMLElement>(\"appRoot\").element;\r\n        }\r\n\r\n        public get application(): Application { return this._applicationService.application; }\r\n    }\r\n\r\n    export interface ApplicationOptions {\r\n        [name: string]: () => any,\r\n        rootNode?: () => Node,\r\n        mainElement?: () => UIElement,\r\n        appId?: () => string,\r\n        currentTheme?: () => string\r\n    }\r\n\r\n    class ApplicationOptionsReader {\r\n\r\n        private _options: ApplicationOptions;\r\n\r\n        constructor(options: ApplicationOptions) {\r\n            this._options = options;\r\n        }\r\n\r\n        public rootNode() {\r\n            return this.getValue(\"rootNode\", null);\r\n        }\r\n\r\n        public mainElement() {\r\n            return this.getValue(\"mainElement\", null);\r\n        }\r\n\r\n        public appId() {\r\n            return this.getValue(\"appId\", null);\r\n        }\r\n\r\n        public currentTheme() {\r\n            return this.getValue(\"currentTheme\", null);\r\n        }\r\n\r\n        public getValue(name: string, defaultValue: any = null) {\r\n            if (typeof this._options[name] === \"function\") {\r\n                return this._options[name]();\r\n            }\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    export class ApplicationService {\r\n\r\n        constructor(\r\n            public readonly application: Application,\r\n            //setAppIdHandler: (appId: string) => void,\r\n            setCurrentPageHandler: (page: Page) => void,\r\n            setCurrentThemeHandler: (theme: string) => void\r\n        ) {\r\n            //this.setAppId = setAppIdHandler.bind(application);\r\n            this.setCurrentPage = setCurrentPageHandler.bind(application);\r\n            this.setCurrentTheme = setCurrentThemeHandler.bind(application);\r\n        }\r\n\r\n        //public readonly setAppId: (appId: string) => void;\r\n        public readonly setCurrentPage: (page: Page) => void;\r\n        public readonly setCurrentTheme: (theme: string) => void;\r\n    }\r\n\r\n    export class Application {\r\n\r\n        private readonly _defaultOptions: ApplicationOptions;\r\n        private _isRunning = false;\r\n        private _root: Node;\r\n        private _configure: () => ApplicationOptions;\r\n        private _options: ApplicationOptions;\r\n        private _appFrame: ApplicationFrame;\r\n        private _appId: string;\r\n\r\n        private _currentPage: Page;\r\n        private _currentTheme: string;\r\n\r\n        protected readonly applicationService: ApplicationService;\r\n        protected readonly events: EventsManager;\r\n\r\n        constructor() {\r\n            this.events = new EventsManager(this);\r\n            this.onApplicationReady = new EventSet<Application, EventArgs>(this.events, \"onApplicationReady\", this);\r\n            this.onThemeChanged = new EventSet<Application, EventArgs>(this.events, \"onThemeChanged\", this);\r\n            this._defaultOptions = {\r\n                mainElement: null,\r\n                rootNode: null\r\n            };\r\n            this.applicationService = new ApplicationService(\r\n                this,\r\n                this.setCurrentPage,\r\n                this.setCurrentTheme\r\n            );\r\n        }\r\n\r\n\r\n        protected initialize() {\r\n\r\n            var optionsReader = new ApplicationOptionsReader(this._options);\r\n\r\n            this._appId = optionsReader.appId() || Internals.getFreeUid();\r\n            this._root = optionsReader.rootNode();\r\n\r\n            this._appFrame = new ApplicationFrame(this.applicationService);\r\n            this._appFrame.htmlElement.setAttribute(\"app-id\", this._appId);\r\n            this._appFrame.content = optionsReader.mainElement();\r\n\r\n            this.setCurrentTheme(optionsReader.currentTheme());\r\n\r\n            this._root.appendChild(this._appFrame.htmlElement);\r\n\r\n            Juice.registerApplication(this);\r\n        }\r\n\r\n        private setCurrentPage(page: Page) {\r\n            if (this._currentPage) {\r\n                this.currentPage.htmlElement.remove();\r\n            }\r\n            this._currentPage = page;\r\n            this._root.appendChild(this._currentPage.htmlElement);\r\n        }\r\n\r\n        private setCurrentTheme(theme: string) {\r\n            if (this._currentTheme !== theme) {\r\n                // TODO\r\n                if (this._currentTheme) {\r\n                    this.rootElement.classList.remove(this._currentTheme);\r\n                }\r\n                this._currentTheme = theme;\r\n                if (this._currentTheme) {\r\n                    this.rootElement.classList.add(this._currentTheme);\r\n                }\r\n                this.onThemeChanged.trigger();\r\n            }\r\n        }\r\n\r\n        private readOptions(options: ApplicationOptions) {\r\n            this._options = {\r\n                mainElement: this.getOptionsValueOrDefault(options, \"mainElement\", this._defaultOptions.mainElement),\r\n                rootNode: this.getOptionsValueOrDefault(options, \"rootNode\", this._defaultOptions.rootNode),\r\n                currentTheme: this.getOptionsValueOrDefault(options, \"currentTheme\", this._defaultOptions.currentTheme)\r\n            };\r\n        }\r\n\r\n        private getOptionsValueOrDefault<T>(options: ApplicationOptions, name: string, defaultValue: () => T): () => T {\r\n            if (name in options) {\r\n                return options[name] as () => T;\r\n            }\r\n            return defaultValue;\r\n        }\r\n\r\n        private assertIsRunning() {\r\n            if (!this._isRunning) {\r\n                throw new Error(\"application not running\");\r\n            }\r\n        }\r\n\r\n\r\n\r\n        public readonly onApplicationReady: EventSet<Application, EventArgs>;\r\n\r\n        public readonly onThemeChanged: EventSet<Application, EventArgs>;\r\n\r\n\r\n        public configure(configure: () => ApplicationOptions) {\r\n            if (this._isRunning) {\r\n                throw new Error(\"application is running\");\r\n            }\r\n            if (typeof configure !== \"function\") {\r\n                throw new Error(\"invalid configure function\");\r\n            }\r\n            this._configure = configure;\r\n        }\r\n\r\n        // public showPage(page: Page) {\r\n        //     this.assertIsRunning();\r\n        //     if(page instanceof Page) {\r\n        //         this.setCurrentPage(page);\r\n        //     }\r\n        // }\r\n\r\n        public run() {\r\n            if (this._isRunning) {\r\n                return;\r\n            }\r\n            this._isRunning = true;\r\n            if (this._configure) {\r\n                let options = this._configure();\r\n                this.readOptions(options);\r\n            }\r\n            window.addEventListener(\"DOMContentLoaded\", () => {\r\n                this.initialize();\r\n                this.onApplicationReady.trigger();\r\n            });\r\n        }\r\n\r\n\r\n        public get appId() { return this._appId; }\r\n\r\n        public get rootElement() { return this._appFrame.htmlElement; }\r\n\r\n        public get currentPage(): Page { return this._currentPage; }\r\n\r\n        public get currentTheme(): string { return this._currentTheme; }\r\n\r\n        // public setTheme(theme: string) {\r\n        //     // TODO\r\n        //     if(this._currentTheme) {\r\n        //         this.rootElement.classList.remove(this._currentTheme);\r\n        //     }\r\n        //     this._currentTheme = theme;\r\n        //     if(this._currentTheme) {\r\n        //         this.rootElement.classList.add(this._currentTheme);\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: Application,\r\n        className: \"Juice.Application\"\r\n    });\r\n}","/// <reference path=\"contentcontrol.ts\" />\r\n\r\n\r\nnamespace Juice {\r\n\r\n    export abstract class ButtonBase extends ContentControl {\r\n\r\n        private _isSelected = false;\r\n        private _isToggle = false;\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template);\r\n            this.onClick = new EventSet<ButtonBase, EventArgs>(this.events, \"onClick\", this);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            templatedElement.rootElement.addEventListener(\"click\", this.onButtonClick.bind(this));\r\n        }\r\n\r\n        protected onButtonClick(e: Event) {\r\n            this.isSelected = !this.isSelected;\r\n            this.events.trigger(\"onClick\", {});\r\n        }\r\n\r\n        private onIsSelectedPropertyChanged() {\r\n            if (this._isToggle) {\r\n                if (this._isSelected) {\r\n                    this.htmlElement.classList.add(\"active\");\r\n                }\r\n                else {\r\n                    this.htmlElement.classList.remove(\"active\");\r\n                }\r\n            }\r\n            else {\r\n                this.htmlElement.classList.remove(\"active\");\r\n            }\r\n        }\r\n\r\n\r\n        public onClick: EventSet<ButtonBase, EventArgs>;\r\n\r\n        public get isSelected() {\r\n            return this._isSelected;\r\n        }\r\n        public set isSelected(v: boolean) {\r\n            if (this._isSelected !== v) {\r\n                this._isSelected = v;\r\n                this.onIsSelectedPropertyChanged();\r\n            }\r\n        }\r\n\r\n        public get isToggle() {\r\n            return this._isToggle;\r\n        }\r\n        public set isToggle(v: boolean) {\r\n            this._isToggle = v;\r\n            if (!this._isToggle) {\r\n                this.isSelected = false;\r\n            }\r\n        }\r\n\r\n        // virtual\r\n        public focus() {\r\n            if (this.htmlElement instanceof HTMLButtonElement) {\r\n                this.htmlElement.focus();\r\n            }\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: Object,\r\n        classConstructor: BindableObject,\r\n        className: \"Juice.BindableObject\",\r\n        isAbstract: true\r\n    });\r\n\r\n\r\n    export class Button extends ButtonBase {\r\n\r\n        protected static readonly DefaultButtonStyles = `\r\n    .jui-button {\r\n        display: inline-block;\r\n        /*padding: 4px 12px;\r\n        border-radius: 4px;\r\n        border: 1px solid #006ab6;\r\n        border-bottom: 1px solid #004475;\r\n        background-color: #006ab6;\r\n        color: #f0f0f0;*/\r\n        cursor: default;\r\n        user-select: none;\r\n    }\r\n\r\n    /*.jui-button:hover {\r\n        border-color: #0094ff;\r\n        border-bottom-color: #006ab6;\r\n        background-color: #0094ff;\r\n        color: #fff;\r\n        box-shadow: 0px 0px 2px 2px rgba(45, 165, 252, 0.2);\r\n    }*/`;\r\n\r\n        protected static readonly DefaultButtonHtmlTemplate = `\r\n<template template-class=\"Juice.Button\">\r\n    <button template-part=\"button\" class=\"jui-button\">\r\n        <div template-part=\"content\" class=\"jui-button-content\"></div>\r\n    </button>\r\n</template>`;\r\n\r\n        private static readonly DefaultButtonTemplate = `<style>\\n${Button.DefaultButtonStyles}\\n</style>\\n${Button.DefaultButtonHtmlTemplate}`;\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template || Button.DefaultButtonTemplate);\r\n            this.onClick = new EventSet<Button, EventArgs>(this.events, \"onClick\", this);\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: ButtonBase,\r\n        classConstructor: Button,\r\n        className: \"Juice.Button\",\r\n        tagName: \"jui-button\"\r\n    });\r\n\r\n\r\n\r\n    export enum FileReadType {\r\n        ArrayBuffer = \"arrayBuffer\",\r\n        BinaryString = \"binaryString\",\r\n        DataURL = \"dataURL\",\r\n        Text = \"text\"\r\n    }\r\n\r\n    export class FileButton extends Button {\r\n\r\n        protected static readonly DefaultFileButtonHtmlTemplate = `\r\n<template template-class=\"Juice.FileButton\">\r\n    <button template-part=\"button\" class=\"jui-button\">\r\n        <input template-part=\"inputFile\" type=\"file\" style=\"display: none\" />\r\n        <div template-part=\"content\" class=\"jui-button-content\"></div>\r\n    </button>\r\n</template>`;\r\n\r\n        private static readonly DefaultFileButtonTemplate = `<style>\\n${Button.DefaultButtonStyles}\\n</style>\\n${FileButton.DefaultFileButtonHtmlTemplate}`;\r\n\r\n        private _part_inputFile: HTMLInputElement;\r\n        private _readerHandler: (reader: FileReader) => void;\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template || FileButton.DefaultFileButtonTemplate);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            this._part_inputFile = templatedElement.withPartElement<HTMLInputElement>(\"inputFile\", (element) => {\r\n                element.addEventListener(\"change\", this.onHiddenFileDataChanged.bind(this));\r\n            });\r\n        }\r\n\r\n        private onHiddenFileDataChanged(e: Event) {\r\n            if (typeof this._readerHandler === \"function\") {\r\n                let file = this._part_inputFile.files[0];\r\n                let reader = new FileReader();\r\n                reader.addEventListener(\"load\", () => {\r\n                    this._readerHandler(reader);\r\n                });\r\n                switch (this.readType) {\r\n                    case FileReadType.ArrayBuffer: {\r\n                        reader.readAsArrayBuffer(file);\r\n                        break;\r\n                    }\r\n                    case FileReadType.BinaryString: {\r\n                        reader.readAsBinaryString(file);\r\n                        break;\r\n                    }\r\n                    case FileReadType.DataURL: {\r\n                        reader.readAsDataURL(file);\r\n                        break;\r\n                    }\r\n                    case FileReadType.Text: {\r\n                        reader.readAsText(file);\r\n                        break;\r\n                    }\r\n                    default: {\r\n                        throw new Error(\"invalid read type\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        protected onButtonClick(e: Event) {\r\n            this._part_inputFile.click();\r\n            super.onButtonClick(e);\r\n        }\r\n\r\n        public readerHandler(handler: (reader: FileReader) => void) {\r\n            this._readerHandler = handler;\r\n        }\r\n\r\n        public get accept(): string {\r\n            return this._part_inputFile.accept;\r\n        }\r\n        public set accept(v: string) {\r\n            this._part_inputFile.accept = v;\r\n        }\r\n\r\n        public readType: FileReadType = FileReadType.Text;\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: Button,\r\n        classConstructor: FileButton,\r\n        className: \"Juice.FileButton\",\r\n        tagName: \"jui-file-button\"\r\n    });\r\n\r\n\r\n\r\n    export class LinkButton extends ButtonBase {\r\n\r\n        protected static readonly DefaultLinkButtonStyles = `\r\n    .jui-link-button {\r\n        padding-left: 2px;\r\n        padding-right: 2px;\r\n        border-radius: 3px;\r\n        display: inline-block;\r\n        color: #006ab6;\r\n        user-select: none;\r\n    }\r\n\r\n    .jui-link-button:hover {\r\n        background-color: #0094ff;\r\n        color: #fff;\r\n        text-decoration: none;\r\n    }`;\r\n\r\n        protected static readonly DefaultLinkButtonHtmlTemplate = `\r\n    <template template-class=\"Juice.LinkButton\">\r\n        <a template-part=\"content\" class=\"jui-link-button\"></a>\r\n    </template>`;\r\n\r\n        private static readonly DefaultLinkButtonTemplate = `<style>\\n${LinkButton.DefaultLinkButtonStyles}\\n</style>\\n${LinkButton.DefaultLinkButtonHtmlTemplate}`;\r\n\r\n        private _part_linkButton: HTMLAnchorElement;\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template || LinkButton.DefaultLinkButtonTemplate);\r\n            this.onClick = new EventSet<Button, EventArgs>(this.events, \"onClick\", this);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: Juice.TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            this._part_linkButton = templatedElement.getPart<HTMLAnchorElement>(\"content\").element;\r\n            this._part_linkButton.href = \"#\";\r\n        }\r\n\r\n        public get href(): string {\r\n            return this._part_linkButton.href;\r\n        }\r\n        public set href(v: string) {\r\n            this._part_linkButton.href = v;\r\n        }\r\n\r\n        public get title(): string {\r\n            return this._part_linkButton.title;\r\n        }\r\n        public set title(v: string) {\r\n            this._part_linkButton.title = v;\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: ButtonBase,\r\n        classConstructor: LinkButton,\r\n        className: \"Juice.LinkButton\",\r\n        tagName: \"jui-link-button\"\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    export enum CollectionChangedAction {\r\n        Added,\r\n        Removed,\r\n        Cleared\r\n    }\r\n\r\n    export class CollectionChangedEventArgs<T> implements EventArgs {\r\n        constructor(\r\n            public readonly action: CollectionChangedAction,\r\n            public readonly index: number,\r\n            items: T[]\r\n        ) { \r\n            this.items = items || []\r\n        }\r\n\r\n        public readonly items: T[]\r\n    }\r\n\r\n    export class Collection<T> {\r\n\r\n        private _items: T[];\r\n        private _events: EventsManager;\r\n\r\n\r\n        constructor(initialItems?: T[]) {\r\n\r\n            if (initialItems) {\r\n                this._items = initialItems;\r\n            }\r\n            else {\r\n                this._items = [];\r\n            }\r\n\r\n            this._events = new EventsManager(this);\r\n\r\n            this.onItemsAdded = new EventSet<Collection<T>, CollectionChangedEventArgs<T>>(this._events, \"onItemsAdded\");\r\n            this.onItemsRemoved = new EventSet<Collection<T>, CollectionChangedEventArgs<T>>(this._events, \"onItemsRemoved\");\r\n            this.onCollectionCleared = new EventSet<Collection<T>, CollectionChangedEventArgs<T>>(this._events, \"onCollectionCleared\");\r\n        }\r\n\r\n        private triggerCollectionChanged(action: CollectionChangedAction, index: number, items: T[]) {\r\n            var args = new CollectionChangedEventArgs<T>(action, index, items);\r\n            switch (action) {\r\n                case CollectionChangedAction.Added: {\r\n                    this._events.trigger(\"onItemsAdded\", args);\r\n                    break;\r\n                }\r\n                case CollectionChangedAction.Removed: {\r\n                    this._events.trigger(\"onItemsRemoved\", args);\r\n                    break;\r\n                }\r\n                case CollectionChangedAction.Cleared: {\r\n                    this._events.trigger(\"onCollectionCleared\", args);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        public insert(index: number, item: T): number {\r\n            if (index < 0)\r\n                index = 0;\r\n            if (index >= this._items.length)\r\n                index = this._items.length;\r\n            if (index === this._items.length) {\r\n                this._items.push(item);\r\n            }\r\n            else {\r\n                this._items.splice(index, 0, item);\r\n            }\r\n            index = this._items.length - 1;\r\n            this.triggerCollectionChanged(CollectionChangedAction.Added, index, [item]);\r\n            return index;\r\n        }\r\n\r\n        public insertRange(index: number, items: T[]): number {\r\n            var i;\r\n            if (index < 0)\r\n                index = 0;\r\n            if (index >= this._items.length)\r\n                index = this._items.length;\r\n            if (index === this._items.length) {\r\n                for (i = 0; i < items.length; i++) {\r\n                    this._items.push(items[i]);\r\n                }\r\n            }\r\n            else {\r\n                this._items.splice(index, 0, ...items);\r\n            }\r\n            if (this._items.length > index) {\r\n                this.triggerCollectionChanged(CollectionChangedAction.Added, index, items);\r\n            }\r\n            return index;\r\n        }\r\n\r\n\r\n        public get length() {\r\n            return this._items.length;\r\n        }\r\n\r\n\r\n        public forEach(callback: (item: T, index: number, collection: Collection<T>) => void): void {\r\n            for (var i = 0; i < this._items.length; i++) {\r\n                callback(this._items[i], i, this);\r\n            }\r\n        }\r\n\r\n        public mapToArray(callback: (item: T, index: number, collection: Collection<T>) => T): T[] {\r\n            var result = []\r\n            for (var i = 0; i < this._items.length; i++) {\r\n                let resultItem = callback(this._items[i], i, this);\r\n                result.push(resultItem);\r\n            }\r\n            return result;\r\n        }\r\n\r\n        public add(item: T) {\r\n            return this.insert(this._items.length, item);\r\n        }\r\n\r\n        public addRange(items: T[]) {\r\n            return this.insertRange(this._items.length, items);\r\n        }\r\n\r\n        public at(index: number) {\r\n            return this._items[index];\r\n        }\r\n\r\n        public clear() {\r\n            var items = this._items;\r\n            this._items = [];\r\n            this.triggerCollectionChanged(CollectionChangedAction.Cleared, 0, items);\r\n        }\r\n\r\n        public contains(item: any, selector: (item: T) => any) {\r\n            if (typeof selector === \"function\") {\r\n                for (var i = 0; i < this._items.length; i++) {\r\n                    if (selector(this._items[i]) === item) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            else {\r\n                return this._items.indexOf(item) >= 0;\r\n            }\r\n        }\r\n\r\n        public indexOf(item: any, selector?: (item: T) => any) {\r\n            if (typeof selector === \"function\") {\r\n                var result = -1;\r\n                for (var i = 0; i < this._items.length; i++) {\r\n                    if (selector(this._items[i]) === item) {\r\n                        result = i;\r\n                        break;\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n            else {\r\n                return this._items.indexOf(item);\r\n            }\r\n        }\r\n\r\n        public remove(item: any, selector?: (item: T) => any) {\r\n            var itemIndex = this.indexOf(item, selector);\r\n            if (itemIndex === -1)\r\n                return false;\r\n            this._items.splice(itemIndex, 1);\r\n            this.triggerCollectionChanged(CollectionChangedAction.Removed, itemIndex, [item]);\r\n            return true;\r\n        }\r\n\r\n        public removeAt(index: number) {\r\n            if (index < 0 || index >= this._items.length)\r\n                return null;\r\n            var item = this._items[index];\r\n            this._items.splice(index, 1);\r\n            this.triggerCollectionChanged(CollectionChangedAction.Removed, index, [item]);\r\n            return item;\r\n        }\r\n\r\n        public removeItems(items: T[]) {\r\n            var itemIndex = -1;\r\n            var removedItems: Array<T> = [];\r\n            for (var i = 0; i < items.length; i++) {\r\n                itemIndex = this.indexOf(items[i]);\r\n                if (itemIndex === -1)\r\n                    continue;\r\n                var removed = this._items.splice(itemIndex, 1);\r\n                removedItems.push(...removed);\r\n            }\r\n            this.triggerCollectionChanged(CollectionChangedAction.Removed, itemIndex, removedItems);\r\n            return removedItems;\r\n        }\r\n\r\n        public removeRange(index: number, length: number) {\r\n            if (typeof index !== \"number\" || index < 0)\r\n                index = 0;\r\n            if (!length) {\r\n                length = this._items.length - index;\r\n            }\r\n            var removedItems = this._items.splice(index, length);\r\n            this.triggerCollectionChanged(CollectionChangedAction.Removed, index, removedItems);\r\n            return removedItems;\r\n        }\r\n\r\n        public removeAll(predicate?: (item: T, index?: number) => boolean) {\r\n            let index: number = null;\r\n            let removedItems: Array<T> = [];\r\n            if (typeof predicate === \"function\") {\r\n                let newItems: Array<T> = [];\r\n                this._items.forEach((v, i, a) => {\r\n                    if (predicate(v, i)) {\r\n                        if (index == null)\r\n                            index = i;\r\n                        removedItems.push(v);\r\n                    } else {\r\n                        newItems.push(v);\r\n                    }\r\n                });\r\n                this._items = newItems;\r\n            }\r\n            else {\r\n                index = 0;\r\n                removedItems = this._items.splice(index, this._items.length);\r\n            }\r\n\r\n            if (removedItems.length > 0)\r\n                this.triggerCollectionChanged(CollectionChangedAction.Removed, index, removedItems);\r\n\r\n            return removedItems;\r\n        }\r\n\r\n        public toArray() {\r\n            return this._items.slice(0);\r\n        }\r\n\r\n\r\n        public readonly onItemsAdded: EventSet<Collection<T>, CollectionChangedEventArgs<T>>;\r\n\r\n        public readonly onItemsRemoved: EventSet<Collection<T>, CollectionChangedEventArgs<T>>;\r\n\r\n        public readonly onCollectionCleared: EventSet<Collection<T>, CollectionChangedEventArgs<T>>;\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: Collection,\r\n        className: \"Juice.Collection\"\r\n    });\r\n}","\r\n\r\nnamespace Juice {\r\n\r\n    export class Dialog extends UIElement {\r\n\r\n        protected static readonly DefaultDialogStyles = `\r\n    .jui-dialog {\r\n        position: fixed;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n        /*min-width: 240px;\r\n        min-height: 100px;\r\n        border-radius: 4px 4px 2px 2px;\r\n        background-color: #fff;\r\n        box-shadow: 0px 0px 5px 5px rgba(0, 0, 0, 0.07);\r\n        border: 1px solid #c0c0c0;*/\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n    \r\n    .jui-dialog-header {\r\n        height: auto;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        /*padding: 5px 20px;\r\n        font-weight: 600;\r\n        border-radius: 4px 4px 0 0;\r\n        border-bottom: 2px solid #fff;\r\n        background-color: #f0f0f0;*/\r\n    }\r\n    \r\n    .jui-dialog-content {\r\n        height: auto;\r\n        flex-grow: 1;\r\n        /*border-radius: 0 0 2px 2px;\r\n        padding: 10px 20px;*/\r\n    }\r\n    \r\n    .jui-dialog-buttons {\r\n        height: auto;\r\n        /*text-align: center;\r\n        padding-top: 10px;\r\n        padding-bottom: 15px;*/\r\n    }`;\r\n\r\n        protected static readonly DefaultDialogHtmlTemplate = `\r\n    <template template-class=\"Juice.Dialog\">\r\n        <div template-part=\"dialog\" class=\"jui-dialog\">\r\n            <div template-part=\"header\" class=\"jui-dialog-header\"></div>\r\n            <div template-part=\"content\" class=\"jui-dialog-content\"></div>\r\n            <div template-part=\"buttons\" class=\"jui-dialog-buttons\"></div>\r\n        </div>\r\n    </template>`;\r\n\r\n        private static readonly DefaultDialogTemplate = `<style>\\n${Dialog.DefaultDialogStyles}\\n</style>\\n${Dialog.DefaultDialogHtmlTemplate}`;\r\n\r\n        private _content: Content;\r\n\r\n        private _part_dialog: HTMLElement;\r\n        private _part_header: HTMLElement;\r\n        private _part_content: HTMLElement;\r\n        private _part_buttons: HTMLElement;\r\n\r\n        constructor(title: string, template?: TemplateSource) {\r\n            super(template || Dialog.DefaultDialogTemplate);\r\n\r\n            this._part_header.innerText = title;\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n\r\n            this._part_dialog = templatedElement.getPart<HTMLElement>(\"dialog\").element;\r\n            this._part_header = templatedElement.getPart<HTMLElement>(\"header\").element;\r\n            this._part_content = templatedElement.getPart<HTMLElement>(\"content\").element;\r\n            this._part_buttons = templatedElement.getPart<HTMLElement>(\"buttons\").element;\r\n        }\r\n\r\n        protected setContent(content: Content) {\r\n            if (this._content !== content) {\r\n                Internals.setContent(this._part_content, content);\r\n            }\r\n        }\r\n\r\n        protected getButtonsContainer(): HTMLElement {\r\n            return this._part_buttons;\r\n        }\r\n\r\n        public show(parent?: Element) {\r\n            if (parent) {\r\n                parent.appendChild(this.htmlElement);\r\n            } else {\r\n                let application = this.getApplication();\r\n                if (application) {\r\n                    application.rootElement.appendChild(this.htmlElement);\r\n                } else {\r\n                    document.body.appendChild(this.htmlElement);\r\n                }\r\n            }\r\n        }\r\n\r\n        public hide() {\r\n            this.htmlElement.remove();\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: Dialog,\r\n        className: \"Juice.Dialog\"\r\n    });\r\n\r\n    export class ModalDialog extends Dialog {\r\n\r\n        protected static readonly DefaultModalDialogStyles = `${Dialog.DefaultDialogStyles}\\n\r\n\r\n    .jui-dialog-mask {\r\n        position: fixed;\r\n        left: 0;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        /*background-color: rgba(255, 255, 255, 0.5);*/\r\n        z-index: 9000;\r\n    }\r\n\r\n    .jui-dialog.modal {\r\n        position: absolute;\r\n        z-index: 1;\r\n    }\r\n    \r\n    /*.jui-dialog.modal .jui-dialog-buttons > .jui-button {\r\n        margin: 0 2px;\r\n    }*/`;\r\n\r\n        protected static readonly DefaultModalDialogHtmlTemplate = `\r\n    <template template-class=\"Juice.ModalDialog\">\r\n        <div template-part=\"dialogMask\" class=\"jui-dialog-mask\">\r\n            <div template-part=\"dialog\" class=\"jui-dialog\">\r\n                <div template-part=\"header\" class=\"jui-dialog-header\"></div>\r\n                <div template-part=\"content\" class=\"jui-dialog-content\"></div>\r\n                <div template-part=\"buttons\" class=\"jui-dialog-buttons\"></div>\r\n            </div>\r\n        </div>\r\n    </template>`;\r\n\r\n        protected _part_dialogMask: HTMLElement;\r\n\r\n        private static readonly DefaultModalDialogTemplate = `<style>\\n${ModalDialog.DefaultModalDialogStyles}\\n</style>\\n${ModalDialog.DefaultModalDialogHtmlTemplate}`;\r\n\r\n        constructor(title: string, template?: TemplateSource) {\r\n            super(title, template || ModalDialog.DefaultModalDialogTemplate);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            this._part_dialogMask = templatedElement.getPart<HTMLElement>(\"dialogMask\").element;\r\n            templatedElement.getPart<HTMLElement>(\"dialog\").element.classList.add(\"modal\");\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: Dialog,\r\n        classConstructor: ModalDialog,\r\n        className: \"Juice.ModalDialog\"\r\n    });\r\n\r\n    export class MessageDialog extends ModalDialog {\r\n\r\n        public static showMessage(title: string, message: string, parent?: Element) {\r\n            let dialog = new MessageDialog(title, message);\r\n            dialog.show(parent);\r\n        }\r\n\r\n        constructor(title: string, message: string, template?: TemplateSource) {\r\n            super(title, template);\r\n            this.setContent(message);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            this._part_dialogMask = templatedElement.getPart<HTMLElement>(\"dialogMask\").element;\r\n\r\n            let buttonsContainer = this.getButtonsContainer();\r\n            let okButton = new Button();\r\n            okButton.content = \"OK\";\r\n            okButton.onClick.add((s, e) => this.hide(), this);\r\n            okButton.appendToHtmlElement(buttonsContainer);\r\n            okButton.focus();\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: ModalDialog,\r\n        classConstructor: MessageDialog,\r\n        className: \"Juice.MessageDialog\"\r\n    });\r\n\r\n    export enum QuestionDialogButtons {\r\n        OkCancel,\r\n        YesNo\r\n    }\r\n\r\n    export class QuestionDialog extends ModalDialog {\r\n\r\n        private _result?: boolean;\r\n        private _onCompleted: (result: boolean) => void;\r\n\r\n        constructor(title: string, message: string, buttons: QuestionDialogButtons, onCompleted: (result: boolean) => void) {\r\n            super(title);\r\n\r\n            this.setContent(message);\r\n\r\n            this._onCompleted = onCompleted;\r\n\r\n            let buttonsContainer = this.getButtonsContainer();\r\n\r\n            let button1 = new Button();\r\n            button1.content = buttons === QuestionDialogButtons.OkCancel ? \"OK\" : \"Yes\";\r\n            button1.onClick.add((s, e) => this.closeDialog(true), this);\r\n            button1.appendToHtmlElement(buttonsContainer);\r\n\r\n            let button2 = new Button();\r\n            button2.content = buttons === QuestionDialogButtons.OkCancel ? \"Cancel\" : \"No\";\r\n            button2.onClick.add((s, e) => this.closeDialog(false), this);\r\n            button2.appendToHtmlElement(buttonsContainer);\r\n\r\n            button1.focus();\r\n        }\r\n\r\n        private closeDialog(result: boolean) {\r\n            this._result = result;\r\n            this.hide();\r\n            if (typeof this._onCompleted === \"function\")\r\n                this._onCompleted(this._result);\r\n        }\r\n\r\n        public get result(): boolean {\r\n            return this._result;\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: ModalDialog,\r\n        classConstructor: QuestionDialog,\r\n        className: \"Juice.QuestionDialog\"\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    export interface EventArgs { [name: string]: any };\r\n\r\n    export type EventHandler<TOwner, TArgs> = (sender: TOwner, eventArgs: TArgs) => void;\r\n\r\n    export interface EventOptions {\r\n        once: boolean;\r\n    }\r\n\r\n    export interface EventGroup<T, TArgs> {\r\n        eventName: string;\r\n        entries: Array<EventEntry<T, TArgs>>;\r\n    }\r\n\r\n    export interface EventEntry<T, TArgs> {\r\n        handler: EventHandler<T, TArgs>;\r\n        options: EventOptions;\r\n        bindTarget: any\r\n    }\r\n\r\n    export interface IEventSet<TOwner, TArgs> {\r\n        add(handler: EventHandler<TOwner, TArgs>): void;\r\n        once(handler: EventHandler<TOwner, TArgs>): void;\r\n        remove(handler: EventHandler<TOwner, TArgs>): void;\r\n        has(handler: EventHandler<TOwner, TArgs>): boolean;\r\n        trigger(args?: TArgs): void;\r\n        stop(): void;\r\n        resume(): void;\r\n    }\r\n\r\n\r\n    export class EventSet<TOwner, TArgs> implements IEventSet<TOwner, TArgs> {\r\n\r\n        private _eventsManager: EventsManager;\r\n        private _eventName: string;\r\n        private _bindTarget: any;\r\n\r\n        constructor(eventGroup: EventsManager, eventName: string, bindTarget?: any) {\r\n            this._bindTarget = bindTarget;\r\n            this._eventsManager = eventGroup;\r\n            this._eventName = eventName;\r\n        }\r\n\r\n        add(handler: EventHandler<TOwner, TArgs>, bindTarget?: any): void {\r\n            this._eventsManager.attach<TArgs>(this._eventName, handler, { once: false }, bindTarget || this._bindTarget);\r\n        }\r\n        once(handler: EventHandler<TOwner, TArgs>): void {\r\n            this._eventsManager.attach<TArgs>(this._eventName, handler, { once: true }, this._bindTarget);\r\n        }\r\n        remove(handler: EventHandler<TOwner, TArgs>): void {\r\n            this._eventsManager.detach<TArgs>(this._eventName, handler);\r\n        }\r\n        has(handler: EventHandler<TOwner, TArgs>): boolean {\r\n            return this._eventsManager.hasHandler<TArgs>(this._eventName, handler);\r\n        }\r\n        trigger(args?: TArgs): void {\r\n            this._eventsManager.trigger(this._eventName, args);\r\n        }\r\n        stop(): void {\r\n            this._eventsManager.stop(this._eventName);\r\n        }\r\n        resume(): void {\r\n            this._eventsManager.resume(this._eventName);\r\n        }\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: EventSet,\r\n        className: \"Juice.EventSet\"\r\n    });\r\n\r\n    export class EventsManager {\r\n\r\n        private readonly _owner: any;\r\n        private readonly _validEventOptions = [\"once\"];\r\n\r\n        private _events: Map<string, EventGroup<any, any>>;\r\n        private _disabledEventsNames: string[] = [];\r\n\r\n        constructor(owner: any) {\r\n            this._owner = owner;\r\n            this._events = new Map<string, EventGroup<any, any>>();\r\n        }\r\n\r\n\r\n        private getHandlerEntryIndex<TArgs>(evntGroup: EventGroup<any, TArgs>, eventHandler: EventHandler<any, TArgs>): number {\r\n            var positions = evntGroup.entries.map((v, i) => v.handler === eventHandler ? i : -1).filter(v => v >= 0);\r\n            if (positions.length == 0) {\r\n                return -1;\r\n            }\r\n            return positions[0];\r\n        }\r\n\r\n        public attach<TArgs>(eventName: string, eventHandler: EventHandler<any, TArgs>, eventOptions?: EventOptions, bindTarget?: any) {\r\n\r\n            if (typeof eventHandler !== \"function\") {\r\n                return;\r\n            }\r\n\r\n            let lowerEventName = eventName.toLowerCase();\r\n\r\n            let eventEntry = {\r\n                handler: eventHandler,\r\n                options: eventOptions,\r\n                bindTarget: bindTarget\r\n            };\r\n\r\n            if (this._events.has(lowerEventName)) {\r\n                let eventGroupEntry = this._events.get(lowerEventName);\r\n                eventGroupEntry.entries.push(eventEntry);\r\n            }\r\n            else {\r\n                let eventGroupEntry: EventGroup<any, TArgs> = {\r\n                    eventName: eventName,\r\n                    entries: [eventEntry]\r\n                };\r\n                this._events.set(lowerEventName, eventGroupEntry);\r\n            }\r\n        }\r\n\r\n        public detach<TArgs>(eventName: string, eventHandler: EventHandler<any, TArgs>) {\r\n\r\n            if (typeof eventHandler !== \"function\") {\r\n                return;\r\n            }\r\n\r\n            let lowerEventName = eventName.toLowerCase();\r\n\r\n            if (!this._events.has(lowerEventName)) {\r\n                return;\r\n            }\r\n\r\n            let eventGroupEntry = this._events.get(lowerEventName);\r\n\r\n            let entryIndex = this.getHandlerEntryIndex(eventGroupEntry, eventHandler);\r\n            if (entryIndex >= 0) {\r\n                eventGroupEntry.entries.splice(entryIndex, 1);\r\n            }\r\n        }\r\n\r\n        public trigger<TArgs>(eventName: string, args?: TArgs) {\r\n\r\n            var lowerEventName = eventName.toLowerCase();\r\n\r\n            if (!this._events.has(lowerEventName)) {\r\n                return;\r\n            }\r\n\r\n            let eventGroupEntry = this._events.get(lowerEventName);\r\n\r\n            var disabledEventIndex = this._disabledEventsNames.indexOf(lowerEventName);\r\n            if (disabledEventIndex !== -1 || this._disabledEventsNames.indexOf(\"*\") !== -1)\r\n                return;\r\n\r\n            let handlersToDetach: Array<EventHandler<any, TArgs>> = [];\r\n\r\n            for (let eventEntry of eventGroupEntry.entries) {\r\n\r\n                let handler = eventEntry.handler;\r\n                if (eventEntry.bindTarget) {\r\n                    handler = eventEntry.handler.bind(eventEntry.bindTarget);\r\n                }\r\n\r\n                // TODO: handle options \r\n                let removeAfter = false;\r\n                if (eventEntry.options && \"once\" in eventEntry.options) {\r\n                    removeAfter = !!eventEntry.options.once;\r\n                }\r\n\r\n                handler(this._owner, args);\r\n\r\n                if (removeAfter) {\r\n                    handlersToDetach.push(handler);\r\n                }\r\n            }\r\n\r\n            for (let detachableHandler of handlersToDetach) {\r\n                this.detach(eventName, detachableHandler);\r\n            }\r\n        }\r\n\r\n        public getHandlersCount(eventName: string): number {\r\n            let lowerEventName = eventName.toLowerCase();\r\n            if (!this._events.has(lowerEventName)) {\r\n                return 0;\r\n            }\r\n            return this._events.get(lowerEventName).entries.length;\r\n        }\r\n\r\n        public hasHandler<TArgs>(eventName: string, eventHandler: EventHandler<any, TArgs>): boolean {\r\n            if (typeof eventHandler !== \"function\") {\r\n                return false;\r\n            }\r\n            let lowerEventName = eventName.toLowerCase();\r\n            if (!this._events.has(lowerEventName)) {\r\n                return false;\r\n            }\r\n            let eventGroupEntry = this._events.get(lowerEventName);\r\n            return this.getHandlerEntryIndex(eventGroupEntry, eventHandler) >= 0;\r\n        }\r\n\r\n        public stop(eventName?: string) {\r\n            if (typeof eventName === \"undefined\") {\r\n                this._disabledEventsNames = [\"*\"];\r\n            }\r\n            else if (typeof eventName === \"string\") {\r\n                var eventIndex = this._disabledEventsNames.indexOf(eventName.toLowerCase());\r\n                if (eventIndex != -1)\r\n                    return;\r\n                this._disabledEventsNames.push(eventName.toLowerCase());\r\n            }\r\n        }\r\n\r\n        public resume(eventName?: string) {\r\n            if (typeof eventName === \"undefined\") {\r\n                this._disabledEventsNames = [];\r\n            }\r\n            else if (typeof eventName === \"string\") {\r\n                var eventIndex = this._disabledEventsNames.indexOf(eventName.toLowerCase());\r\n                if (eventIndex == -1)\r\n                    return;\r\n                this._disabledEventsNames.splice(eventIndex, 1);\r\n            }\r\n        }\r\n\r\n        public create<TArgs>(eventName: string) {\r\n            var eventGroupObj = new EventSet<any, TArgs>(this, eventName);\r\n            var descriptor = {\r\n                enumerable: true,\r\n                value: eventGroupObj\r\n            };\r\n            Object.defineProperty(this._owner, name, descriptor);\r\n            return eventGroupObj;\r\n        }\r\n\r\n        public createEventArgs(data?: { [name: string]: any }): EventArgs {\r\n            var result: EventArgs = {};\r\n            if (typeof data === \"object\") {\r\n                for (let k in Object.keys(data)) {\r\n                    result[k] = data[k];\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: EventsManager,\r\n        className: \"Juice.EventsManager\"\r\n    });\r\n}","/// <reference path=\"Builder.ts\" />\r\n/// <reference path=\"UIElement.ts\" />\r\n/// <reference path=\"UIElementBehaviour.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    export class ItemsControlBehaviour extends UIElementBehaviour {\r\n\r\n        private _items: Collection<UIElement>;\r\n\r\n        private initializeItemsControlBehaviour(): void {\r\n            this._items = new Collection<UIElement>();\r\n            this._items.onItemsAdded.add(this.onItemsCollectionChanged, this);\r\n            this._items.onItemsRemoved.add(this.onItemsCollectionChanged, this);\r\n            this._items.onCollectionCleared.add(this.onItemsCollectionChanged, this);\r\n        }\r\n\r\n        private onItemsCollectionChanged(s: Collection<UIElement>, e: CollectionChangedEventArgs<UIElement>) {\r\n            this._onItemsCollectionChanged(e);\r\n        }\r\n\r\n        // protected virtual\r\n        protected _onItemsCollectionChanged(args: CollectionChangedEventArgs<UIElement>): void { }\r\n\r\n        public get items() {\r\n            return this._items;\r\n        }\r\n    }\r\n\r\n    export class ItemsControl extends UIElement {\r\n        constructor(template?: TemplateSource) {\r\n            super(template);\r\n            UIElementBehaviour.initialize(ItemsControlBehaviour, this);\r\n        }\r\n    }\r\n\r\n    export interface ItemsControl extends ItemsControlBehaviour {\r\n        new(template?: Template): ItemsControl;\r\n    }\r\n\r\n    Builder.applyBehaviours(ItemsControl, [ItemsControlBehaviour]);\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: ItemsControl,\r\n        className: \"Juice.ItemsControl\",\r\n        tagName: \"jui-items-control\"\r\n    });\r\n}","/// <reference path=\"UIElement.ts\" />\r\n/// <reference path=\"ItemsControl.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    //type GridUnitSize = [number, \"px\" | \"in\" | \"%\" /* ecc. */];\r\n\r\n    export type GridLength = number | \"auto\";\r\n\r\n    export interface GridColumn {\r\n        width: GridLength;\r\n    }\r\n\r\n    export interface GridRow {\r\n        height: GridLength;\r\n    }\r\n\r\n    interface GridCellWrapper {\r\n        htmlElement: HTMLElement;\r\n        column: number;\r\n        row: number;\r\n    }\r\n\r\n    export class Grid extends ItemsControl {\r\n\r\n        private static readonly DefaultGridTemplate = `\r\n    <template template-class=\"Juice.Grid\">\r\n        <div class=\"jui-grid\" template-part=\"gridContainer\">\r\n        </div>\r\n    </template>`;\r\n\r\n        public static getColumn(uiElement: UIElement): number {\r\n            if (uiElement.htmlElement.hasAttribute(\"grid-column\")) {\r\n                let str = uiElement.htmlElement.getAttribute(\"grid-column\");\r\n                return parseInt(str);\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n\r\n        public static getRow(uiElement: UIElement): number {\r\n            if (uiElement.htmlElement.hasAttribute(\"grid-row\")) {\r\n                let str = uiElement.htmlElement.getAttribute(\"grid-row\");\r\n                return parseInt(str);\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n\r\n        public static getColumnAndRow(uiElement: UIElement): { column: number, row: number } {\r\n            return {\r\n                column: Grid.getColumn(uiElement),\r\n                row: Grid.getRow(uiElement)\r\n            };\r\n        }\r\n\r\n        public static setColumn(uiElement: UIElement, column: number) {\r\n            if (column <= 0) {\r\n                uiElement.htmlElement.removeAttribute(\"grid-column\");\r\n            }\r\n            else {\r\n                uiElement.htmlElement.setAttribute(\"grid-column\", column.toString());\r\n            }\r\n        }\r\n\r\n        public static setRow(uiElement: UIElement, row: number) {\r\n            if (row <= 0) {\r\n                uiElement.htmlElement.removeAttribute(\"grid-row\");\r\n            }\r\n            else {\r\n                uiElement.htmlElement.setAttribute(\"grid-row\", row.toString());\r\n            }\r\n        }\r\n\r\n        public static setColumnAndRow(uiElement: UIElement, column: number, row: number) {\r\n            Grid.setColumn(uiElement, column);\r\n            Grid.setRow(uiElement, row);\r\n        }\r\n\r\n        private _columnDefinitions: Collection<GridColumn>;\r\n        private _rowDefinitions: Collection<GridRow>;\r\n        private _cells: Array<Array<GridCellWrapper>>;\r\n        private _part_gridContainer: HTMLElement;\r\n        private _onUpdateLayout = false;\r\n        private _layoutUpdated = false;\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template || Grid.DefaultGridTemplate);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n\r\n            this._columnDefinitions = new Collection<GridColumn>();\r\n            this._columnDefinitions.onCollectionCleared.add(this.onGridColumnCollectionChanged, this);\r\n            this._columnDefinitions.onItemsAdded.add(this.onGridColumnCollectionChanged, this);\r\n            this._columnDefinitions.onItemsRemoved.add(this.onGridColumnCollectionChanged, this);\r\n\r\n            this._rowDefinitions = new Collection<GridRow>();\r\n            this._rowDefinitions.onCollectionCleared.add(this.onGridRowCollectionChanged, this);\r\n            this._rowDefinitions.onItemsAdded.add(this.onGridRowCollectionChanged, this);\r\n            this._rowDefinitions.onItemsRemoved.add(this.onGridRowCollectionChanged, this);\r\n\r\n            // get template parts\r\n            this._part_gridContainer = templatedElement.getPart<HTMLElement>(\"gridContainer\").element;\r\n            this.prepareGrid();\r\n        }\r\n\r\n        private prepareGrid() {\r\n\r\n            let defaultCell = this.createCellWrapper(0, 0);\r\n            let firstRowCellArray = new Array<GridCellWrapper>();\r\n            firstRowCellArray.push(defaultCell);\r\n            this._part_gridContainer.appendChild(defaultCell.htmlElement);\r\n\r\n            this._cells = [firstRowCellArray];\r\n\r\n            for (let r = 0; r < this._rowDefinitions.length; r++) {\r\n\r\n                let rowCellArray = firstRowCellArray;\r\n                if (r > 0) {\r\n                    rowCellArray = new Array<GridCellWrapper>();\r\n                    this._cells.push(rowCellArray);\r\n                }\r\n\r\n                for (let c = 0; c < this._columnDefinitions.length; c++) {\r\n                    if (r === 0 && c === 0) {\r\n                        continue;\r\n                    }\r\n                    let cell = this.createCellWrapper(c, r);\r\n                    rowCellArray.push(cell);\r\n                    this._part_gridContainer.appendChild(cell.htmlElement);\r\n                }\r\n            }\r\n        }\r\n\r\n        private arrangeCells() {\r\n            this._cells.forEach((rowCells, row) => {\r\n                let rowDefinition = this._rowDefinitions.at(row);\r\n                rowCells.forEach((cell, column) => {\r\n                    if (rowDefinition.height === \"auto\") {\r\n\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        private updateGridLayout() {\r\n            if (this._onUpdateLayout) {\r\n                return;\r\n            }\r\n            this._onUpdateLayout = true;\r\n            setTimeout(\r\n                () => {\r\n                    this.prepareGrid();\r\n                    this._onUpdateLayout = false;\r\n                },\r\n                100\r\n            );\r\n        }\r\n\r\n        private createCellWrapper(column: number, row: number) {\r\n\r\n            var htmlElement = document.createElement(\"div\");\r\n            htmlElement.classList.add(\"grid-item\");\r\n\r\n            return {\r\n                column,\r\n                row,\r\n                htmlElement\r\n            };\r\n        }\r\n\r\n        private getCellWrapper(column: number, row: number) {\r\n\r\n            if (row < 0) {\r\n                row = 0;\r\n            }\r\n            else if (row >= this._cells.length) {\r\n                row = this._cells.length - 1;\r\n            }\r\n\r\n            if (column < 0) {\r\n                column = 0;\r\n            }\r\n            else if (column >= this._cells[row].length) {\r\n                column = this._cells[row].length - 1;\r\n            }\r\n\r\n            return this._cells[row][column];\r\n        }\r\n\r\n        private onGridColumnCollectionChanged(s: Collection<GridColumn>, e: CollectionChangedEventArgs<GridColumn>): void {\r\n            this.updateGridLayout();\r\n        }\r\n\r\n        private onGridRowCollectionChanged(s: Collection<GridRow>, e: CollectionChangedEventArgs<GridRow>): void {\r\n            this.updateGridLayout();\r\n        }\r\n\r\n\r\n        private onItemsAdded(e: CollectionChangedEventArgs<UIElement>): void {\r\n\r\n            var refElement: Node;\r\n\r\n            for (let i = 0; i < e.items.length; i++) {\r\n\r\n                let child = e.items[i];\r\n                let { column, row } = Grid.getColumnAndRow(child);\r\n\r\n                let childElement = e.items[i].htmlElement;\r\n\r\n                let cellWrapper = this.getCellWrapper(row, column);\r\n                cellWrapper.htmlElement.appendChild(childElement);\r\n            }\r\n        }\r\n\r\n        private onItemsRemoved(e: CollectionChangedEventArgs<UIElement>) {\r\n            // TODO\r\n            console.warn(\"Grid.onItemsRemoved not implemented\");\r\n        }\r\n\r\n        private onCollectionCleared(e: CollectionChangedEventArgs<UIElement>) {\r\n            this._cells = [];\r\n            while (this._part_gridContainer.firstChild)\r\n                this._part_gridContainer.firstChild.remove();\r\n        }\r\n\r\n\r\n        protected _onItemsCollectionChanged(args: CollectionChangedEventArgs<UIElement>): void {\r\n            switch (args.action) {\r\n                case CollectionChangedAction.Added:\r\n                    this.onItemsAdded(args);\r\n                    break;\r\n                case CollectionChangedAction.Removed:\r\n                    this.onItemsRemoved(args);\r\n                    break;\r\n                case CollectionChangedAction.Cleared:\r\n                    this.onCollectionCleared(args);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        public get columnDefinitions() {\r\n            return this._columnDefinitions;\r\n        }\r\n\r\n        public get rowDefinitions() {\r\n            return this._rowDefinitions;\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: ItemsControl,\r\n        classConstructor: Grid,\r\n        className: \"Juice.Grid\",\r\n        tagName: \"jui-grid\"\r\n    });\r\n}","/// <reference path=\"ItemsControl.ts\" />\r\n/// <reference path=\"HeaderedControl.ts\" />\r\n\r\n\r\nnamespace Juice {\r\n\r\n    export class HeaderedItemsControl extends UIElement {\r\n        constructor(template?: TemplateSource) {\r\n            super(template);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            UIElementBehaviour.initialize(HeaderedControlBehaviour, this);\r\n            UIElementBehaviour.initialize(ItemsControlBehaviour, this);\r\n            this._setHeaderElement(templatedElement.getPart<HTMLElement>(\"header\").element);\r\n        }\r\n    }\r\n\r\n    export interface HeaderedItemsControl extends HeaderedControlBehaviour, ItemsControlBehaviour {\r\n        new(template?: string | HTMLTemplateElement | HTMLElement): HeaderedItemsControl;\r\n    }\r\n\r\n    Builder.applyBehaviours(HeaderedItemsControl, [HeaderedControlBehaviour, ItemsControlBehaviour]);\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: HeaderedItemsControl,\r\n        className: \"Juice.HeaderedItemsControl\",\r\n        tagName: \"jui-headered-items-control\"\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    let DefaultHtmlContainerTemplate = `\r\n<template template-class=\"HtmlContainer\">\r\n    <div template-part=\"container\"></div>\r\n</template>`;\r\n\r\n    export class HtmlContainer extends UIElement {\r\n\r\n        private _part_container: HTMLElement;\r\n\r\n        constructor(template?: Template) {\r\n            super(template || DefaultHtmlContainerTemplate);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            this._part_container = templatedElement.getPart<HTMLElement>(\"container\").element;\r\n        }\r\n\r\n        public get html(): string {\r\n            return this._part_container.innerHTML;\r\n        }\r\n\r\n        public set html(v: string) {\r\n            this._part_container.innerHTML = v;\r\n        }\r\n\r\n        public addContent(...content: HTMLElement[]) {\r\n            for (let element of content) {\r\n                this._part_container.appendChild(element);\r\n            }\r\n        }\r\n\r\n        public setContent(...content: HTMLElement[]) {\r\n            this.html = \"\";\r\n            this.addContent(...content);\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: HtmlContainer,\r\n        className: \"Juice.HtmlContainer\",\r\n        tagName: \"jui-html-container\"\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    let _applications = new Map<string, Application>();\r\n\r\n    export function getApplication(appId: string) {\r\n        if(_applications.has(appId)) {\r\n            return _applications.get(appId);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    export function registerApplication(application: Application) {\r\n        if(!_applications.has(application.appId)) {\r\n            _applications.set(application.appId, application);\r\n        }\r\n    }\r\n\r\n    export function unregisterApplication(application: Application) {\r\n        if(!_applications.has(application.appId)) {\r\n            _applications.delete(application.appId);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}","/// <reference path=\"UIElement.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    export class Page extends UIElement {\r\n        constructor(template?: TemplateSource) {\r\n            super(template);\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: Page,\r\n        className: \"Juice.Page\",\r\n        tagName: \"jui-page\"\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    export class Selector {\r\n\r\n        constructor(\r\n            public selector: string,\r\n            public context?: ParentNode | (() => ParentNode)\r\n        ) { }\r\n\r\n        private getCurrentContext(): ParentNode {\r\n            if (typeof this.context === \"function\") {\r\n                return this.context();\r\n            } else {\r\n                return this.context;\r\n            }\r\n        }\r\n\r\n        public query() {\r\n            if (this.context) {\r\n                return this.getCurrentContext().querySelector(this.selector);\r\n            }\r\n            return document.querySelector(this.selector);\r\n        }\r\n\r\n        public queryAll() {\r\n            if (this.context) {\r\n                return this.getCurrentContext().querySelectorAll(this.selector);\r\n            }\r\n            return document.querySelectorAll(this.selector);\r\n        }\r\n    }\r\n\r\n    Builder.defineClass({\r\n        baseClass: Object,\r\n        classConstructor: Selector,\r\n        className: \"Juice.Selector\"\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    export enum Orientation {\r\n        Horizontal = \"horizontal\",\r\n        Vertical = \"vertical\"\r\n    }\r\n\r\n    export class StackLayout extends ItemsControl {\r\n\r\n        protected static readonly DefaultStackLayoutStyle = `\r\n        .jui-stack-layout-items {\r\n            display: flex;\r\n            flex-direction: column;\r\n            justify-content: flex-start;\r\n            align-items: flex-start;\r\n        }\r\n        \r\n        .jui-stack-layout-items.vertical {\r\n            flex-direction: column;\r\n        }\r\n        \r\n        .jui-stack-layout-items.horizontal {\r\n            flex-direction: row;\r\n        }`;\r\n\r\n        protected static readonly DefaultStackLayoutHtmlTemplate = `\r\n<template template-class=\"Juice.StackLayout\">\r\n    <div class=\"jui-stack-layout\">\r\n        <div template-part=\"layoutItems\" class=\"jui-stack-layout-items vertical\"></div>\r\n    </div>\r\n</template>`;\r\n\r\n        private static readonly DefaultStackLayoutTemplate = `<style>\\n${StackLayout.DefaultStackLayoutStyle}\\n</style>\\n${StackLayout.DefaultStackLayoutHtmlTemplate}`;\r\n\r\n        private _part_layoutItems: HTMLElement;\r\n\r\n        private _orientation: Orientation;\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template || StackLayout.DefaultStackLayoutTemplate);\r\n            this._orientation = Orientation.Vertical;\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            this._part_layoutItems = templatedElement.getPart<HTMLElement>(\"layoutItems\").element;\r\n        }\r\n\r\n        protected _onItemsCollectionChanged(args: CollectionChangedEventArgs<UIElement>) {\r\n            switch(args.action){\r\n                case CollectionChangedAction.Added: {\r\n                    this.onItemsAdded(args);\r\n                    break;\r\n                }\r\n                case CollectionChangedAction.Removed: {\r\n                    this.onItemsRemoved(args);\r\n                    break;\r\n                }\r\n                case CollectionChangedAction.Cleared: {\r\n                    this.onCollectionCleared(args);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        private onItemsAdded(e: CollectionChangedEventArgs<UIElement>): void {\r\n            var refElement = this._part_layoutItems.children[e.index];\r\n            if (!refElement) {\r\n                for (let i = 0; i < e.items.length; i++) {\r\n                    let item = e.items[i];\r\n                    this._part_layoutItems.appendChild(e.items[i].htmlElement);\r\n                }\r\n            } else {\r\n                for (let i = 0; i < e.items.length; i++) {\r\n                    var child = e.items[i].htmlElement;\r\n                    this._part_layoutItems.insertBefore(child, refElement);\r\n                    refElement = child;\r\n                }\r\n            }\r\n        }\r\n\r\n        private onItemsRemoved(e: CollectionChangedEventArgs<UIElement>) {\r\n            // TODO\r\n            console.warn(\"StackPanel.onItemsRemoved not implemented\");\r\n        }\r\n\r\n        private onCollectionCleared(e: CollectionChangedEventArgs<UIElement>) {\r\n            while (this._part_layoutItems.firstChild)\r\n                this._part_layoutItems.firstChild.remove();\r\n        }\r\n\r\n        private onOrientationChanged() {\r\n            if(this._orientation === Orientation.Vertical) {\r\n                this._part_layoutItems.classList.add(\"vertical\");\r\n                this._part_layoutItems.classList.remove(\"horizontal\");\r\n            } else {\r\n                this._part_layoutItems.classList.add(\"horizontal\");\r\n                this._part_layoutItems.classList.remove(\"vertical\");\r\n            }\r\n        }\r\n\r\n        public get orientation() { return this._orientation; }\r\n        public set orientation(v: Orientation) {\r\n            if(this._orientation !== v) {\r\n                this._orientation = v;\r\n                this.onOrientationChanged();\r\n            }\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: ItemsControl,\r\n        classConstructor: StackLayout,\r\n        className: \"Juice.StackLayout\",\r\n        tagName: \"jui-stack-layout\"\r\n    });\r\n}","/// <reference path=\"UIElement.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    export class TableView extends UIElement {\r\n\r\n        protected static readonly DefaultTableViewStyles = `\r\n    .jui-table-view {\r\n        width: auto;\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .jui-table-view thead {\r\n    }\r\n\r\n    .jui-table-view th {\r\n        white-space: nowrap;\r\n        /*padding: 0 4px;\r\n        font-size: 0.9em;*/\r\n    }\r\n\r\n    .jui-table-view td {\r\n        white-space: nowrap;\r\n        /*padding-left: 4px;\r\n        padding-right: 4px;*/\r\n    }`;\r\n\r\n        protected static readonly DefaultTableViewHtmlTemplate = `\r\n    <template template-class=\"Juice.TableView\">\r\n        <table template-part=\"table\" class=\"jui-table-view\">\r\n        </table>\r\n    </template>`;\r\n\r\n        private static readonly DefaultTableViewTemplate = `<style>\\n${TableView.DefaultTableViewStyles}\\n</style>\\n${TableView.DefaultTableViewHtmlTemplate}`;\r\n\r\n        private _part_table: HTMLTableElement;\r\n\r\n        constructor(template?: Template) {\r\n            super(template || TableView.DefaultTableViewTemplate);\r\n            this.onPropertyChanged.add((s, e) => {\r\n                if (e.propertyName === \"data\") {\r\n                    this.onDataPropertyChanged(e.propertyValue);\r\n                }\r\n            });\r\n        }\r\n\r\n        protected initializeTemplate(templatedElemnt: TemplatedElement) {\r\n            super.initializeTemplate(templatedElemnt);\r\n            this._part_table = templatedElemnt.getPart<HTMLTableElement>(\"table\").element;\r\n        }\r\n\r\n        private onDataPropertyChanged(data: any) {\r\n\r\n            this.clearTable();\r\n\r\n            if (data === null) {\r\n                return;\r\n            }\r\n\r\n            if (data instanceof Array) {\r\n                this.loadIterable(data);\r\n            }\r\n            else if (data instanceof Date) {\r\n                this.loadPrimitive(data);\r\n            }\r\n            else if (typeof data === \"object\") {\r\n                this.loadObject(data);\r\n            }\r\n            else {\r\n                this.loadPrimitive(data);\r\n            }\r\n        }\r\n\r\n        private loadIterable(data: Iterable<any>) {\r\n\r\n            let thead = document.createElement(\"thead\");\r\n            let tbody = document.createElement(\"tbody\");\r\n\r\n            if (data !== null) {\r\n\r\n                for (let record of data) {\r\n                    let firstEntry = true;\r\n                    let entryType: string = null;\r\n\r\n                    let firstItem = record;\r\n                    if (firstItem instanceof Array) {\r\n                        entryType = \"array\";\r\n                    } else {\r\n                        entryType = typeof firstItem;\r\n                    }\r\n\r\n                    if (entryType === \"object\") {\r\n                        let tdIndexHead = document.createElement(\"th\");\r\n                        tdIndexHead.innerText = \"#\";\r\n                        tdIndexHead.classList.add(\"index\");\r\n                        thead.appendChild(tdIndexHead);\r\n                        for (let k of Object.keys(firstItem)) {\r\n                            let td = document.createElement(\"th\");\r\n                            td.innerText = k;\r\n                            thead.appendChild(td);\r\n                        }\r\n\r\n                        let index = 0;\r\n                        for (let record of data) {\r\n                            let tr = document.createElement(\"tr\");\r\n                            let tdIndex = document.createElement(\"td\");\r\n                            tdIndex.classList.add(\"index\");\r\n                            tdIndex.innerText = index.toString();\r\n                            tr.appendChild(tdIndex);\r\n                            for (let k of Object.keys(record)) {\r\n                                let v = record[k];\r\n                                let td = document.createElement(\"td\");\r\n                                td.innerText = v;\r\n                                tr.appendChild(td);\r\n                            }\r\n                            tbody.appendChild(tr);\r\n                            index++;\r\n                        }\r\n                    }\r\n                    else if (entryType === \"array\") {\r\n                        // TODO\r\n                        let index = 0;\r\n                        for (let record of data) {\r\n                            let tr = document.createElement(\"tr\");\r\n                            let tdIndex = document.createElement(\"td\");\r\n                            tdIndex.classList.add(\"index\");\r\n                            tdIndex.innerText = index.toString();\r\n                            tr.appendChild(tdIndex);\r\n                            let tdValue = document.createElement(\"td\");\r\n                            tdValue.innerText = record.toString();\r\n                            tr.appendChild(tdValue);\r\n                            tbody.appendChild(tr);\r\n                            index++;\r\n                        }\r\n                    }\r\n                    else {\r\n                        let index = 0;\r\n                        for (let record of data) {\r\n                            let tr = document.createElement(\"tr\");\r\n                            let tdIndex = document.createElement(\"td\");\r\n                            tdIndex.classList.add(\"index\");\r\n                            tdIndex.innerHTML = `<b>${index}</b>`;\r\n                            tr.appendChild(tdIndex);\r\n                            let tdValue = document.createElement(\"td\");\r\n                            tdValue.innerText = record.toString();\r\n                            tr.appendChild(tdValue);\r\n                            tbody.appendChild(tr);\r\n                            index++;\r\n                        }\r\n                    }\r\n\r\n                    break;\r\n                }\r\n            }\r\n\r\n            this._part_table.appendChild(thead);\r\n            this._part_table.appendChild(tbody);\r\n        }\r\n\r\n        private loadPrimitive(primitive: any) {\r\n            let tr = document.createElement(\"tr\");\r\n            let td = document.createElement(\"td\");\r\n            td.innerText = primitive.toString();\r\n            tr.appendChild(td);\r\n            this._part_table.appendChild(tr);\r\n        }\r\n\r\n        private loadObject(obj: { [name: string]: any }) {\r\n\r\n            let tbody = document.createElement(\"tbody\");\r\n\r\n            if (obj !== null) {\r\n                for (let k of Object.keys(obj)) {\r\n                    let tr = document.createElement(\"tr\");\r\n                    let value = obj[k];\r\n                    if (typeof value === \"function\")\r\n                        continue;\r\n                    let tdName = document.createElement(\"td\");\r\n                    tdName.innerHTML = `<b>${k}</b>`;\r\n                    tr.appendChild(tdName);\r\n                    let tdValue = document.createElement(\"td\");\r\n                    tdValue.innerText = value;\r\n                    tr.appendChild(tdValue);\r\n                    tbody.appendChild(tr);\r\n                }\r\n            }\r\n\r\n            this._part_table.appendChild(tbody);\r\n        }\r\n\r\n        private clearTable() {\r\n            while (this._part_table.firstChild)\r\n                this._part_table.firstChild.remove();\r\n        }\r\n\r\n        public clear() {\r\n            this.data = null;\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: UIElement,\r\n        classConstructor: TableView,\r\n        className: \"Juice.TableView\",\r\n        tagName: \"jui-table-view\"\r\n    });\r\n}","\r\n/// <reference path=\"HeaderedItemsControl.ts\" />\r\n\r\nnamespace Juice {\r\n\r\n    export class Toolbar extends HeaderedItemsControl {\r\n\r\n        protected static readonly DefaultToolbarStyles = `\r\n    .jui-toolbar {\r\n        display: flex;\r\n        flex-flow: row;\r\n        align-items: center;\r\n    }\r\n\r\n    .jui-toolbar-label {\r\n        width: auto;\r\n        /*padding: 0 10px;*/\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .jui-toolbar-items {\r\n        width: 100%;\r\n        white-space: nowrap;\r\n        overflow-x: hidden;\r\n        align-items: center;\r\n        display: flex;\r\n    }\r\n\r\n    .jui-toolbar-items > * {\r\n        display: inline-block;\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .jui-toolbar-button {\r\n        display: inline-block;\r\n        height: 100%;\r\n        /*min-width: 32px;\r\n        min-height: 32px;\r\n        color: #222;\r\n        background-color: transparent;\r\n        outline: 0;\r\n        border: 0;\r\n        border-radius: 0;\r\n        padding: 4px 4px;*/\r\n        background-position: center center;\r\n        background-repeat: no-repeat;\r\n        background-size: auto;\r\n        position: relative;\r\n        cursor: default;\r\n        user-select: none;\r\n    }\r\n\r\n    .jui-toolbar-menu-button > svg {\r\n        display: block;\r\n        /*position: relative;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%,-50%);*/\r\n    }`;\r\n\r\n        protected static readonly DefaultToolbarHtmlTemplate = `\r\n<template template-class=\"Juice.Toolbar\">\r\n    <div class=\"jui-toolbar\">\r\n        <div template-part=\"header\" class=\"jui-toolbar-label\"></div>\r\n        <div template-part=\"toolbarItems\" class=\"jui-toolbar-items\"></div>\r\n        <button disabled template-part=\"toolbarMenuButton\" class=\"jui-toolbar-button jui-toolbar-menu-button\">\r\n            <svg class=\"jui-toolbar-icon-svg\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n                <circle cx=\"12\" cy=\"5.5\" r=\"1.5\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"1.5\" />\r\n                <circle cx=\"12\" cy=\"18.5\" r=\"1.5\" />\r\n            </svg>\r\n        </button>\r\n    </div>\r\n</template>`;\r\n\r\n        private static readonly DefaultToolbarTemplate = `<style>\\n${Toolbar.DefaultToolbarStyles}\\n</style>\\n${Toolbar.DefaultToolbarHtmlTemplate}`;\r\n\r\n        private _part_toolbarItems: HTMLElement;\r\n\r\n        constructor(template?: TemplateSource) {\r\n            super(template || Toolbar.DefaultToolbarTemplate);\r\n        }\r\n\r\n        protected initializeTemplate(templatedElement: TemplatedElement) {\r\n            super.initializeTemplate(templatedElement);\r\n            this._part_toolbarItems = templatedElement.getPart<HTMLElement>(\"toolbarItems\").element;\r\n        }\r\n\r\n        private onItemsAdded(e: CollectionChangedEventArgs<UIElement>): void {\r\n            var refElement = this._part_toolbarItems.children[e.index];\r\n            if (!refElement) {\r\n                for (let i = 0; i < e.items.length; i++) {\r\n                    let item = e.items[i];\r\n                    if (item instanceof Button) {\r\n                        item.htmlElement.classList.remove(\"jui-button\");\r\n                        item.htmlElement.classList.add(\"jui-toolbar-button\");\r\n                    }\r\n                    this._part_toolbarItems.appendChild(e.items[i].htmlElement);\r\n                }\r\n            } else {\r\n                for (let i = 0; i < e.items.length; i++) {\r\n                    var child = e.items[i].htmlElement;\r\n                    this._part_toolbarItems.insertBefore(child, refElement);\r\n                    refElement = child;\r\n                }\r\n            }\r\n        }\r\n\r\n        private onItemsRemoved(e: CollectionChangedEventArgs<UIElement>) {\r\n            // TODO\r\n            console.warn(\"Toolbar.onItemsRemoved not implemented\");\r\n        }\r\n\r\n        private onCollectionCleared(e: CollectionChangedEventArgs<UIElement>) {\r\n            while (this._part_toolbarItems.firstChild)\r\n                this._part_toolbarItems.removeChild(this._part_toolbarItems.firstChild);\r\n        }\r\n\r\n\r\n        protected _onItemsCollectionChanged(args: CollectionChangedEventArgs<UIElement>): void {\r\n            switch (args.action) {\r\n                case CollectionChangedAction.Added:\r\n                    this.onItemsAdded(args);\r\n                    break;\r\n                case CollectionChangedAction.Removed:\r\n                    this.onItemsRemoved(args);\r\n                    break;\r\n                case CollectionChangedAction.Cleared:\r\n                    this.onCollectionCleared(args);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        protected _onApplyTemplate(templatedElement: TemplatedElement) {\r\n            super._onApplyTemplate(templatedElement);\r\n            this.initializeTemplate(templatedElement);\r\n        }\r\n\r\n        public addButton(content?: Content): Button {\r\n            let btn = new Button();\r\n            if (typeof content !== \"undefined\") {\r\n                btn.content = content;\r\n            }\r\n            this.items.add(btn);\r\n            return btn;\r\n        }\r\n\r\n        public addSeparator(): HtmlContainer {\r\n            let sep = new HtmlContainer();\r\n            sep.htmlElement.classList.add(\"jui-toolbar-item-separator\");\r\n            this.items.add(sep);\r\n            return sep;\r\n        }\r\n\r\n        public addLabel(text: string): HtmlContainer {\r\n            let label = new HtmlContainer();\r\n            label.htmlElement.textContent = text;\r\n            this.items.add(label);\r\n            return label;\r\n        }\r\n    }\r\n\r\n    Builder.defineComponent({\r\n        baseClass: ItemsControl,\r\n        classConstructor: Toolbar,\r\n        className: \"Juice.Toolbar\",\r\n        tagName: \"jui-toolbar\"\r\n    });\r\n}","\r\nnamespace Juice {\r\n\r\n    export namespace Internals {\r\n\r\n        export function isPrimitive(value: any): boolean {\r\n\r\n            if (value === null)\r\n                return false;\r\n\r\n            var type = typeof value;\r\n            switch (type) {\r\n                case \"string\":\r\n                case \"number\":\r\n                case \"boolean\":\r\n                    return true;\r\n                default:\r\n                    return false;\r\n            }\r\n        }\r\n    }\r\n}","\r\nnamespace Juice {\r\n    \r\n    export namespace Internals {\r\n\r\n        export var templateDirPath = \"/assets/templates/\";\r\n\r\n        export function getTemplateFile(relativePath: string): Promise<Document> {\r\n            let path = templateDirPath + relativePath;\r\n            return new Promise<Document>((resolve, reject) => {\r\n                fetch(path)\r\n                    .then((response) => {\r\n                        return response.text();\r\n                    })\r\n                    .then((content) => {\r\n                        // Convert the HTML string into a document object\r\n                        var parser = new DOMParser();\r\n                        var doc = parser.parseFromString(content, 'text/html');\r\n                        resolve(doc);\r\n                    })\r\n                    .catch(err => {\r\n                        reject(err);\r\n                    });\r\n            });\r\n        }\r\n    }\r\n}\r\n","\r\nnamespace Juice {\r\n\r\n    export namespace Internals {\r\n\r\n        interface InstanceReference {\r\n            instance: any;\r\n            element: Element;\r\n        }\r\n\r\n        const _uids: Array<string> = [];\r\n        const _uidsInstances: Map<string, InstanceReference> = new Map<string, InstanceReference>();\r\n\r\n        function s4() {\r\n            return Math.floor((1 + Math.random()) * 0x10000)\r\n                .toString(16)\r\n                .substring(1);\r\n        }\r\n\r\n\r\n        export function getFreeUid() {\r\n            var uid;\r\n            do {\r\n                uid = s4() + s4();\r\n            } while (_uids.indexOf(uid) >= 0);\r\n            return uid;\r\n        }\r\n\r\n        export function registerElement(uid: string, instance: any, element: Element) {\r\n            _uidsInstances.set(uid, { instance, element });\r\n        }\r\n\r\n        export function setContent(element: HTMLElement, content: Content) {\r\n            if (typeof content === \"undefined\" || content == null) {\r\n                element.innerHTML = \"\";\r\n                return;\r\n            }\r\n\r\n            if (Internals.isPrimitive(content)) {\r\n                if (typeof content === \"string\" && /^\\s*<\\w+/.test(content)) {\r\n                    element.innerHTML = content;\r\n                } else {\r\n                    element.innerText = content.toString();\r\n                }\r\n            }\r\n            else if (content instanceof UIElement) {\r\n                // TODO set parent\r\n                element.appendChild(content.htmlElement);\r\n            }\r\n            else {\r\n                if (content instanceof HTMLElement) {\r\n                    element.appendChild(content);\r\n                }\r\n                else if (content instanceof NodeList) {\r\n                    for (let child of content) {\r\n                        element.appendChild(child);\r\n                    }\r\n                }\r\n                else {\r\n                    element.innerText = content.toString();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}"]}